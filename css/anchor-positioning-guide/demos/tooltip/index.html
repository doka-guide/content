<!DOCTYPE html>
<html lang="ru">
<head>
  <title>–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π —Ç—É–ª—Ç–∏–ø –Ω–∞ –æ—Å–Ω–æ–≤–µ Popover API –∏ CSS Anchor Positioning ‚Äî Anchor Positioning ‚Äî –î–æ–∫–∞</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&display=swap">
  <style>
    *, *::before, *::after {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      color-scheme: dark;
    }

    html, body {
      width: 100%;
      height: 100%;
    }

    body {
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: #18191C;
      color: #FFFFFF;
      font-family: "Roboto", sans-serif;
      font-size: 18px;
    }

    .button {
      display: block;
      min-width: 210px;
      border: 2px solid transparent;
      border-radius: 6px;
      padding: 9px 15px;
      color: #000000;
      font-size: inherit;
      font-weight: 300;
      font-family: inherit;
      transition: background-color 0.15s ease-in;
      cursor: pointer;
      background-color: #2E9AFF;
    }

    /* —ç—Ç–∏ —Å—Ç–∏–ª–∏ –Ω—É–∂–Ω—ã —Ç–æ–ª—å–∫–æ –¥–ª—è –¥–µ–º–∫–∏, —á—Ç–æ–±—ã —Ä–∞–±–æ—Ç–∞–ª dran'n'drop */
    .button {
      position: absolute;
      touch-action: none;
    }

    .button:hover {
      background-color: #FFFFFF;
    }

    .button:focus-visible {
      border: 2px solid #FFFFFF;
      outline: none;
    }

    .button:focus {
      border: 2px solid #FFFFFF;
      outline: none;
    }

    @media (max-width: 768px) {
      .button {
        min-width: 60px;
      }
    }

    .tooltip-anchor {
      /* –¥–∞—ë–º —è–∫–æ—Ä—é (–∫–Ω–æ–ø–∫–µ) –∏–º—è */
      anchor-name: --button-el;
    }

    .tooltip {
      inset: unset;
      max-width: 300px;
      bottom: 10px;
      padding: 10px 40px;
      background-color: #FFFFFF;
      color: #000000;
      text-align: center;

      /* —Å—Å—ã–ª–∞–µ–º—Å—è –Ω–∞ —è–∫–æ—Ä—å, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –ø—Ä–∏–≤—è–∑–∞–Ω —Ç—É–ª—Ç–∏–ø */
      position-anchor: --button-el;
      /* –≤—ã—Å—Ç–∞–≤–ª—è–µ–º –¥–µ—Ñ–æ–ª—Ç–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —è–∫–æ—Ä—è */
      position-area: top;
      /* –¥–æ–±–∞–≤–ª—è–µ–º —Ñ–æ–ª–±—ç–∫–∏, –µ—Å–ª–∏ –¥–µ—Ñ–æ–ª—Ç –Ω–µ –æ—Ç—Ä–∞–±–æ—Ç–∞–ª */
      position-try-fallbacks: --bottom, --left, --right;
      /* –¥–µ–ª–∞–µ–º —Ç—É–ª—Ç–∏–ø —è–∫–æ—Ä–µ–º */
      anchor-name: --tooltip-el;
    }

    /* –æ–ø–∏—Å—ã–≤–∞–µ–º, —á—Ç–æ –∑–Ω–∞—á–∞—Ç —Ñ–æ–ª–±—ç–∫–∏ */
    @position-try --bottom {
      position-area: bottom;
      bottom: unset;
      top: 10px;
    }

    @position-try --left {
      position-area: left;
      max-width: 200px;
      bottom: unset;
      right: 10px;
    }

    @position-try --right {
      position-area: right;
      max-width: 200px;
      bottom: unset;
      left: 10px;
    }

    .tooltip-content {
      background-color: inherit;
    }

    /* —Ö–≤–æ—Å—Ç–∏–∫–∏ */
    .tooltip::before,
    .tooltip::after,
    .tooltip .tooltip-content::before,
    .tooltip .tooltip-content::after {
      /* —è–∫–æ—Ä–∏–º—Å—è –Ω–∞ —Ç–æ—Ç –∂–µ —ç–ª–µ–º–µ–Ω—Ç, —á—Ç–æ –∏ —Ç—É–ª—Ç–∏–ø */
      position-anchor: --button-el;
      content: '';
      position: fixed;
      background-color: inherit;
      margin: auto;
    }

    /* –¥–ª—è –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–π –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏ */
    .tooltip::before,
    .tooltip::after {
      left: anchor(--button-el start);
      right: anchor(--button-el end);
      width: 10px;
      max-height: 10px;
    }

    /* –¥–ª—è –∫–µ–π—Å–∞, –∫–æ–≥–¥–∞ —Ç—É–ª—Ç–∏–ø –ø–æ–¥ –∫–Ω–æ–ø–∫–æ–π */
    .tooltip::before {
      /* —Ä–∞—Å—Ç—è–≥–∏–≤–∞–µ–º —Ö–≤–æ—Å—Ç–∏–∫ –º–µ–∂–¥—É –¥–≤—É–º—è —è–∫–æ—Ä—è–º–∏ */
      top: anchor(--button-el end);
      bottom: anchor(--tooltip-el start);
      translate: 0 7px;
      rotate: 45deg;
    }

    /* –¥–ª—è –∫–µ–π—Å–∞, –∫–æ–≥–¥–∞ —Ç—É–ª—Ç–∏–ø –Ω–∞–¥ –∫–Ω–æ–ø–∫–æ–π */
    .tooltip::after {
      /* —Ä–∞—Å—Ç—è–≥–∏–≤–∞–µ–º —Ö–≤–æ—Å—Ç–∏–∫ –º–µ–∂–¥—É –¥–≤—É–º—è —è–∫–æ—Ä—è–º–∏ */
      top: anchor(--tooltip-el end);
      bottom: anchor(--button-el start);
      translate: 0 -7px;
      rotate: 45deg;
    }

    /* –¥–ª—è –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–π –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏ */
    .tooltip .tooltip-content::before,
    .tooltip .tooltip-content::after {
      top: anchor(--button-el start);
      bottom: anchor(--button-el end);
      height: 10px;
      max-width: 10px;
    }

    /* –¥–ª—è –∫–µ–π—Å–∞, –∫–æ–≥–¥–∞ —Ç—É–ª—Ç–∏–ø —Å–ø—Ä–∞–≤–∞ –æ—Ç –∫–Ω–æ–ø–∫–∏ */
    .tooltip .tooltip-content::before {
      /* —Ä–∞—Å—Ç—è–≥–∏–≤–∞–µ–º —Ö–≤–æ—Å—Ç–∏–∫ –º–µ–∂–¥—É –¥–≤—É–º—è —è–∫–æ—Ä—è–º–∏ */
      left: anchor(--button-el end);
      right: anchor(--tooltip-el start);
      translate: 7px;
      rotate: 45deg;
    }

    /* –¥–ª—è –∫–µ–π—Å–∞, –∫–æ–≥–¥–∞ —Ç—É–ª—Ç–∏–ø —Å–ª–µ–≤–∞ –æ—Ç –∫–Ω–æ–ø–∫–∏ */
    .tooltip .tooltip-content::after {
      /* —Ä–∞—Å—Ç—è–≥–∏–≤–∞–µ–º —Ö–≤–æ—Å—Ç–∏–∫ –º–µ–∂–¥—É –¥–≤—É–º—è —è–∫–æ—Ä—è–º–∏ */
      left: anchor(--tooltip-el end);
      right: anchor(--button-el start);
      translate: -7px;
      rotate: 45deg;
    }

    .cap-supports-notification-container {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      position: fixed;
      inset: 0;
      backdrop-filter: blur(5px);
      padding: 30px;
    }

    .cap-supports-notification {
      padding: 20px;
      background-color: #42464c;
    }

    .cap-supports-notification h3 {
      margin: 0 0 20px;
    }

    @supports (anchor-name: --test) {
      .cap-supports-notification-container {
        display: none;
      }
    }
  </style>
</head>
<body>
  <button class="button tooltip-anchor" id="tooltip-anchor" aria-describedby="tooltip">
    ‚ù§Ô∏è
  </button>
  <div class="tooltip" id="tooltip" role="tooltip" popover="manual">
    <div class="tooltip-content">
      –î–æ–±–∞–≤–∏—Ç—å –≤¬†¬´–ò–∑–±—Ä–∞–Ω–Ω–æ–µ¬ª
    </div>
  </div>
  <script>
    const tooltip = document.querySelector('#tooltip')
    const tooltipAnchor = document.querySelector('#tooltip-anchor')

    const showTooltip = () => {
      tooltip.showPopover()
    }

    const hideTooltip = () => {
      tooltip.hidePopover()
    }

    tooltipAnchor.addEventListener('mouseenter', showTooltip)
    tooltipAnchor.addEventListener('focus', showTooltip)

    tooltipAnchor.addEventListener('mouseleave', hideTooltip)
    tooltipAnchor.addEventListener('blur', hideTooltip)

    tooltipAnchor.addEventListener('keydown', (event) => {
      if (event.key === 'Escape') {
        hideTooltip()
      }
    })
  </script>
  <script>
    // —ç—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç —Ä–µ–∞–ª–∏–∑—É–µ—Ç dran'n'drop –¥–ª—è –¥–µ–º–∫–∏
    let isDragging = false
    let offsetX, offsetY

    tooltipAnchor.style.cursor = 'move'

    document.addEventListener('pointerdown', (e) => {
        isDragging = true

        const rect = tooltipAnchor.getBoundingClientRect();
        offsetX = e.clientX - rect.left
        offsetY = e.clientY - rect.top

        tooltipAnchor.style.cursor = 'grabbing'
    });

    document.addEventListener('pointermove', (e) => {
        if (!isDragging) return

        tooltipAnchor.style.left = (e.clientX - offsetX) + 'px'
        tooltipAnchor.style.top = (e.clientY - offsetY) + 'px'
    });

    document.addEventListener('pointerup', () => {
        isDragging = false
        tooltipAnchor.style.cursor = 'move'
    })
  </script>
  <div class="cap-supports-notification-container">
    <div class="cap-supports-notification">
      <h3>–í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Anchor Positioning&nbsp;üò¢</h3>
      <p>
          –û—Ç–∫—Ä–æ–π—Ç–µ –¥–µ–º–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ, –∏–º–µ—é—â–µ–º <a href="https://caniuse.com/css-anchor-positioning">–ø–æ–¥–¥–µ—Ä–∂–∫—É</a>.
      </p>
    </div>
  </div>
</body>
</html>
