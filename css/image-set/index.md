---
title: "`image-set()`"
description: "Позволяет установить несколько разрешений и типов фонового изображения."
authors:
  - lattelix
keywords:
  - набор фоновых изображений
related:
  - css/background-image
  - html/picture
  - css/vendor-prefixes
tags:
  - doka
---

## Кратко

CSS-функция `image-set()` позволяет перечислить несколько фоновых изображений с условиями, по которым браузер решит, какое из них наиболее подходящее для загрузки в данный момент.

Похож по принципу работы на тег [`<picture>`](/html/picture/).

## Пример

```css
div {
  background-image: image-set(
    url("puppy@1x.webp") type("image/webp") 1x,
    url("puppy@2x.webp") type("image/webp") 2x,
    url("puppy@1x.png") type("image/png") 1x,
    url("puppy@2x.png") type("image/png") 2x
  );
}
```

## Как понять

У всех разные устройства, у большинства будут дисплеи с повышенной плотностью пикселей, а на телефонах лучше подходят небольшие файлы ради уменьшения задержек при загрузке. Чтобы угодить сразу всем, нужно как то давать разным клиентам разные версии изображений. В такой ситуации когда-то использовали [медиа выражения](https://doka.guide/css/media/), а сейчас есть простые и удобные решения, которые позволяют через запятую указать все версии изображений. Конечно, есть тег [`<picture>`](/html/picture/), но если изображение декоративное, будет правильнее установить его как фон элемента.

## Как пишется

Внутри круглых скобок указываем через запятую две и более ссылки на изображения при помощи функции `url()` и пишем условие для выбора этой картинки.

В качестве условия можно использовать коэффициент плотности пикселей: `1x`, `2x` и так далее. Или указываем тип изображения в формате MIME. Картинка будет загружена, если формат поддерживается браузером. Можно комбинировать условия.

Как и в случае с [`<picture>`](/html/picture/), важен порядок перечисления форматов картинок: сначала более предпочтительные (AVIF, WebP), потом — менее (PNG, JPEG). Так браузер поймёт, какой из форматов ему выбрать, если он поддерживает все. Порядок перечисления картинок разной плотности не важен, браузер сам выберет подходящую.


## Поддержка

Firefox поддерживает свойство полностью, а остальные...

Коротко о поддержке свойства в браузерах chrome и safari:
- отображение ломается при указании типов изображений в формате MIME
- перечисление нескольких типов и/или разрешений изображений работает только с `jpeg`, в остальных случаях ломается
- не отображается avif
- работает только с [вендорным префиксом](/css/vendor-prefixes/) `-webkit-`

Если вы не хотите сомневаться в поддержке всех типов изображений веде, можете использовать тег [`<picture>`](/html/picture/), ругать вас за это никто не станет.

Таким образом для полной поддержки код можно писать так:

```css
div {
  /* Фолбэк */
  background-image: url("puppy.png");

  /* Для Chrome и Safari */
  background-image: -webkit-image-set(
      url("puppy@2x.jpeg") 2x,
      url("puppy@1x.jpeg") 1x
    );

  /* Для Firefox */
  background-image: image-set(
      url("puppy@2x.avif") type("image/avif") 2x,
      url("puppy@1x.avif") type("image/avif") 1x,
      url("puppy@2x.webp") type("image/webp") 2x,
      url("puppy@1x.webp") type("image/webp") 1x,
      url("puppy@2x.png") 2x,
      url("puppy@1x.png") 1x
    );
}
```

Проверить поддержку на данный момент вы можете в [демке](https://pepelsbey.github.io/playground/63/).

Материал взят у [Вадима Макеева](https://www.youtube.com/c/pepelsbey) и с сайта [css-tricks](https://css-tricks.com/using-performant-next-gen-images-in-css-with-image-set/).

