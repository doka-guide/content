#### ‚õîüìú –ë–ª–æ–∫–∏—Ä—É–µ–º —Å–∫—Ä–æ–ª–ª

–ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ç–æ, —á—Ç–æ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–æ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞–µ—Ç –≤–µ—Å—å –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Å –ø–æ–º–æ—â—å—é –ø—Å–µ–≤–¥–æ—ç–ª–µ–º–µ–Ω—Ç–∞ `::backdrop`, –≤—Å—è –æ—Å—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Å—ë —Ä–∞–≤–Ω–æ –¥–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∏. –≠—Ç–æ –º–æ–∂–µ—Ç —Å–º—É—â–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –µ—Å–ª–∏ –Ω–∞ –∑–∞–¥–Ω–µ–º –ø–ª–∞–Ω–µ –±—É–¥–µ—Ç —á—Ç–æ-—Ç–æ –º–µ–ª—å—Ç–µ—à–∏—Ç—å.

–†–µ—à–∏—Ç—å —ç—Ç—É –ø—Ä–æ–±–ª–µ–º—É –º–æ–∂–Ω–æ, —Å—Ç–∞–≤—è `overflow: hidden;` –Ω–∞ `body`. –í –¥–µ–º–∫–µ –Ω–∏–∂–µ —ç—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –∫–ª–∞—Å—Å–∞ `scroll-lock`.

–¢–∞–∫ –∂–µ —Å –ø–æ–º–æ—â—å—é `scrollbar-gutter` –º–æ–∂–Ω–æ ¬´–∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞—Ç—å¬ª –º–µ—Å—Ç–æ –ø–æ–¥ —Å–∫—Ä–æ–ª–ª, —á—Ç–æ–±—ã –∫–æ–Ω—Ç–µ–Ω—Ç –Ω–µ –ø—Ä—ã–≥–∞–ª –ø—Ä–∏ –µ–≥–æ –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–∏ —Å–∫—Ä–æ–ª–ª–±–∞—Ä–∞.

```css
html,
body {
  scrollbar-gutter: stable;
}
```

–ù–µ –∑–∞–±—ã–≤–∞–µ–º —Ç–∞–∫ –∂–µ –≤–µ—Ä–Ω—É—Ç—å –≤—Å—ë –∫–∞–∫ –±—ã–ª–æ, –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏.

```js
dialogOpener.addEventListener("click", openModalAndLockScroll);
dialog.addEventListener("close", returnScroll);

function openModalAndLockScroll() {
  dialog.showModal();
  document.body.classList.add("scroll-lock");
}

function returnScroll() {
  document.body.classList.remove("scroll-lock");
}
```

<iframe title="–ë–ª–æ–∫–∏—Ä—É–µ–º —Å–∫–æ–ª–ª –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω ‚Äî –î–æ–∫–∞" src="../demos/scroll-lock/" height="320"></iframe>

#### ‚ùå –ó–∞–∫—Ä—ã–≤–∞–µ–º –ø–æ –∫–ª–∏–∫—É –Ω–∞ `::backdrop`

–ß–∞—Å—Ç—ã–π UX-—Å—Ü–µ–Ω–∞—Ä–∏–π, —á—Ç–æ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ –∫–ª–∏–∫—É –Ω–∞ –ø–æ–¥–ª–æ–∂–∫—É (–æ–≤–µ—Ä–ª–µ–π). –ü–æ—Å–∫–æ–ª—å–∫—É –¥–ª—è `<dialog>` –ø–æ–¥–ª–æ–∂–∫–æ–π —è–≤–ª—è–µ—Ç—Å—è –ø—Å–µ–≤–¥–æ—ç–ª–µ–º–µ–Ω—Ç `::backdrop`, —Ç–æ –ø—Ä–æ—Å—Ç–æ –Ω–∞–≤–µ—Å–∏—Ç—å –Ω–∞ –Ω–µ–≥–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –Ω–µ –≤—ã–π–¥–µ—Ç.

–û–¥–Ω–∞–∫–æ –∫–ª–∏–∫ –ø–æ `::backdrop` —Å—á–∏—Ç–∞–µ—Ç—Å—è –∏ –∫–ª–∏–∫–æ–º –ø–æ —Å–∞–º–æ–º—É —ç–ª–µ–º–µ–Ω—Ç—É `<dialog>`. –ó–Ω–∞—á–∏—Ç –º–æ–∂–Ω–æ –æ–±–µ—Ä–Ω—É—Ç—å –≤–µ—Å—å –∫–æ–Ω—Ç–µ–Ω—Ç –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –≤ –æ–±—ë—Ä—Ç–∫—É –∏ –æ—Ç–ª–∞–≤–ª–∏–≤–∞—Ç—å –∫–æ–≥–¥–∞ –∫–ª–∏–∫ –ø—Ä–æ—Ö–æ–¥–∏—Ç –ø–æ —Å–∞–º–æ–º—É –¥–∏–∞–ª–æ–≥—É, –∞ –∫–æ–≥–¥–∞ –ø–æ –∫–æ–Ω—Ç–µ–Ω—Ç—É –≤ –Ω—ë–º.

```html
<dialog class="dialog">
  <div class="dialog__wrapper">
    –ö–æ–Ω—Ç–µ–Ω—Ç –¥–∏–∞–ª–æ–≥–∞
  </div>
</dialog>
```

–£ —ç–ª–µ–º–µ–Ω—Ç–∞ –¥–∏–∞–ª–æ–≥–∞ –µ—Å—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –±—Ä–∞—É–∑–µ—Ä–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã –∏ –æ–±–≤–æ–¥–∫–∞. –ê –∑–Ω–∞—á–∏—Ç –∏—Ö –Ω—É–∂–Ω–æ –æ–±–Ω—É–ª–∏—Ç—å –∏ –ø–æ—Å—Ç–∞–≤–∏—Ç—å –Ω–∞ –æ–±—ë—Ä—Ç–∫—É, —á—Ç–æ–±—ã –æ–Ω–∞ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞–ª–∞ –≤—Å—é ¬´–ø–æ–ª–µ–∑–Ω—É—é –æ–±–ª–∞—Å—Ç—å –æ–∫–Ω–∞¬ª. –ò–Ω–∞—á–µ –∫–ª–∏–∫–∏ –ø–æ –æ—Ç—Å—Ç—É–ø–∞–º —Ç–æ–∂–µ –±—É–¥—É—Ç –∑–∞–∫—Ä—ã–≤–∞—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ.

```css
.dialog {
  border: none;
  padding: 0;
}

.dialog__wrapper {
  padding: 1em;
}
```

–¢–µ–ø–µ—Ä—å –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç –¥–∏–∞–ª–æ–≥–∞ –º—ã –º–æ–∂–µ–º –¥–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∞–ª –Ω–∞ –ø–æ–¥–ª–æ–∂–∫—É, —Ç–æ `currentTarget` –±—É–¥–µ—Ç —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å `target`. –í –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ, –∫–ª–∏–∫ –ø–æ—à—ë–ª –Ω–∞ –¥–æ—á—ë—Ä–Ω–∏–π DOM —É–∑–µ–ª, –∫–æ—Ç–æ—Ä—ã–π –∏ –±—É–¥–µ—Ç `target`.

```js
dialogElement.addEventListener("click", closeOnBackDropClick);

function closeOnBackDropClick({ currentTarget, target }) {
  const dialogElement = currentTarget;
  const isClickedOnBackDrop = target === dialogElement
  if (isClickedOnBackDrop) {
    dialogElement.close();
  }
}
```

<iframe title="–ó–∞–∫—Ä—ã—Ç–∏–µ <dialog> –ø–æ –∫–ª–∏–∫—É –Ω–∞ ::backdrop ‚Äî –î–æ–∫–∞" src="demos/backdrop-close/" height="350"></iframe>

‚ö†Ô∏è –ü–æ–º–Ω–∏—Ç–µ, —á—Ç–æ –∫–ª–∏–∫ –ø–æ –ø–æ–¥–ª–æ–∂–∫–µ —ç—Ç–æ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± –∑–∞–∫—Ä—ã—Ç–∏—è. –ï—Å–ª–∏ –≤–∞—à –¥–∏–∑–∞–π–Ω–µ—Ä –Ω–µ –Ω–∞—Ä–∏—Å–æ–≤–∞–ª —è–≤–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è, —Ç–æ —É–±–µ–¥–∏—Ç–µ –µ–≥–æ —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å. –ù—É –∏–ª–∏ —É–±–µ–¥–∏—Ç–µ —Å–µ–±—è, –µ—Å–ª–∏ –≤—ã —Å–∞–º –¥–∏–∑–∞–π–Ω–µ—Ä.

#### ‚ùå –ó–∞–∫—Ä—ã–≤–∞–µ–º –¥–∏–∞–ª–æ–≥ –ø–æ –∫–ª–∏–∫—É –ø–æ —Å–≤–æ–±–æ–¥–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏

–≠—Ç–æ—Ç –ø—Ä–∏–º–µ—Ä –ø–æ—Ö–æ–∂ –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏–π, —Ç–æ–ª—å–∫–æ —Ç–µ–ø–µ—Ä—å –ø–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º –∫–ª–∏–∫–∏ –ø–æ –≤—Å–µ–º—É –¥–æ–∫—É–º–µ–Ω—Ç—É –∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º –±—ã–ª –ª–∏ –∫–ª–∏–∫–Ω—É—Ç –¥–∏–∞–ª–æ–≥ –∏–ª–∏ –µ–≥–æ –ø–æ—Ç–æ–º–æ–∫. –ï—Å–ª–∏ –æ–±–∞ —Å–ª—É—á–∞–µ –Ω–µ–≤–µ—Ä–Ω—ã, –∑–Ω–∞—á–∏—Ç –∫–ª–∏–∫ –ø—Ä–æ—à—ë–ª –≤–Ω–µ –¥–∏–∞–ª–æ–≥–∞ –∏ –µ–≥–æ –º–æ–∂–Ω–æ –∑–∞–∫—Ä—ã—Ç—å.

```js
function closeDialogOnOutsideClick({ target }) {
  const isClickOnDialog = target === dialogElement;
  const isClickOnDialogChildrenNodes = dialogElement.contains(target);

  const isClickOutsideOfDialog = !(
    isClickOnDialog || isClickOnDialogChildrenNodes
  );

  if (isClickOutsideOfDialog) {
    dialogElement.close();
  }
}
```

<iframe title="–ó–∞–∫—Ä—ã—Ç–∏–µ <dialog> –ø–æ –∫–ª–∏–∫—É –Ω–∞ —Å–≤–æ–±–æ–¥–Ω—É—é –æ–±–ª–∞—Å—Ç—å ‚Äî –î–æ–∫–∞" src="demos/close-dialog-ouside/" height="295"></iframe>

#### ‚ûï –†–∞—Å—à–∏—Ä—è–µ–º –±—Ä–∞—É–∑–µ—Ä–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É

–ü–æ –¥–∞–Ω–Ω—ã–º [Can I Use](https://caniuse.com/dialog), Firefox –∏ Safari –Ω–∞—á–∞–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å `<dialog>` —Ç–æ–ª—å–∫–æ –≤ –º–∞—Ä—Ç–µ 2022 –≥–æ–¥–∞. –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤, –ø–æ –∫—Ä–∞–π–Ω–µ–π –º–µ—Ä–µ –±–ª–∏–∂–∞–π—à–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ª–µ—Ç, –Ω—É–∂–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∏ –±–æ–ª–µ–µ —Å—Ç–∞—Ä—ã–µ –≤–µ—Ä—Å–∏–∏ –±—Ä–∞—É–∑–µ—Ä–æ–≤. –ß—Ç–æ –¥–µ–ª–∞—Ç—å? –û—Ç–∫–∞–∑—ã–≤–∞—Ç—å—Å—è –æ—Ç —Ç–∞–∫–æ–≥–æ —É–¥–æ–±–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞?

–ö —Å—á–∞—Å—Ç—å—é, –∫–æ–º–∞–Ω–¥–∞ Google Chrome –¥–∞–≤–Ω–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–ª–∞ [–ø–æ–ª–∏—Ñ–∏–ª](https://github.com/GoogleChrome/dialog-polyfill), –∫–æ—Ç–æ—Ä—ã–π –∏–º–∏—Ç–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É `<dialog>` –≤ —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö. –í—Å—ë —á—Ç–æ –Ω—É–∂–Ω–æ —ç—Ç–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏.

–ù–æ —Å—Ç–æ–π—Ç–µ! –ù–µ—É–∂–µ–ª–∏ ‚âà<sup>3</sup>/<sub>4</sub> –Ω–∞—à–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø—Ä–∏–¥—ë—Ç—Å—è –≥—Ä—É–∑–∏—Ç—å —Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –∏–º –≤–æ–æ–±—â–µ –Ω–µ –Ω—É–∂–µ–Ω? –ü–æ–ª—É—á–∞–µ—Ç—Å—è –æ–¥–Ω–æ –∏–∑ –≥–ª–∞–≤–Ω—ã—Ö –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤ –Ω–∞—Ç–∏–≤–Ω—ã—Ö –¥–∏–∞–ª–æ–≥–æ–≤—ã—Ö –æ–∫–æ–Ω —Å—Ä–∞–∑—É –æ—Ç–ø–∞–¥–∞–µ—Ç. –ê –µ—Å–ª–∏ –∏–∑-–∑–∞ –ø–æ–ª–∏—Ñ–∏–ª–∞ —ç—Ç–∏ –Ω–∞—Ç–∏–≤–Ω—ã–µ –æ–∫–Ω–∞ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å [–Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ](https://github.com/GoogleChrome/dialog-polyfill/blob/master/index.js#L533-L534)?

–ö —Å—á–∞—Å—Ç—å—é —ç—Ç–∏—Ö –ø—Ä–æ–±–ª–µ–º –º–æ–∂–Ω–æ –∏–∑–±–µ–∂–∞—Ç—å —Å –ø–æ–º–æ—â—å—é –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞:

```js
/**
 * –í —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö –º—ã –±—ã –±—Ä–∞–ª–∏ –ø–æ–ª–∏—Ñ–∏–ª –∏–∑ Node –ø–∞–∫–µ—Ç–∞.
 * –ù–æ –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞ –≤–æ—Å–ø–æ–ª—å–∑—É–µ–º—Å—è CDN */
const dialogPolyfillURL = "https://esm.run/dialog-polyfill";

const isBrowserNotSupportDialog = window.HTMLDialogElement === undefined;

/**
 * –ü–æ–¥–∫–ª—é—á–∞–µ–º –ø–æ–ª–∏—Ñ–∏–ª –∫ –∫–∞–∂–¥–æ–º—É dialog –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ, –µ—Å–ª–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –Ω–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏
 * */
if (isBrowserNotSupportDialog) {
  const dialogs = document.querySelectorAll("dialog");

  dialogs.forEach(async (dialog) => {
    const { default: polyfill } = await import(dialogPolyfillURL);
    polyfill.registerDialog(dialog);
  });
}
```

–ü–æ–º–∏–º–æ —Å–∫—Ä–∏–ø—Ç–∞ –Ω—É–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å –∏ —Å—Ç–∏–ª–∏. –í—ã –º–æ–∂–µ—Ç–µ, –∫–∞–∫ –ø—Ä–æ—Å—Ç–æ [–≤–∑—è—Ç—å](https://github.com/GoogleChrome/dialog-polyfill/blob/master/dialog-polyfill.css) –∏–∑ —Ç–æ–≥–æ –∂–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è —Å –ø–æ–ª–∏—Ñ–∏–ª–æ–º, –ª–∏–±–æ —Å—Ä–∞–∑—É –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥ —Å–µ–±—è.

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ —Å–∫—Ä–∏–ø—Ç –ø–æ–ª–∏—Ñ–∏–ª–∞ –Ω–µ –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å –ø—Å–µ–≤–¥–æ—ç–ª–µ–º–µ–Ω—Ç `::backdrop`, –ø–æ—ç—Ç–æ–º—É —Å—Ç–∏–ª–∏ –¥–ª—è –Ω–µ–≥–æ –≤–∞–º –Ω—É–∂–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å –∏ –¥–ª—è `div` —Å –∫–ª–∞—Å—Å–æ–º `.backdrop`.

```css
dialog::backdrop {
  background-color: rgb(0 0 0 / 70%);
}
dialog + .backdrop {
  background-color: rgb(0 0 0 / 70%);
}
```

<iframe title="<dialog> —Å –ø–æ–ª–∏—Ñ–∏–ª–æ–º" src="demos/close-dialog-ouside/" height="385"></iframe>
