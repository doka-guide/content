---
title: "SVG-спрайт"
description: "Что такое SVG-спрайты, как их создавать, когда применять и как они могут помочь вам в улучшении производительности вашего сайта."
authors:
  - s-dudko
keywords:
  - свг
  - векторная графика
related:
  - html/svg
  - css/fill
  - tools/http-protocol
tags:
  - article
---

## Кратко

SVG-спрайт — это файл, получаемый в результате объединения нескольких [файлов SVG](/html/svg/). Файл-спрайт используется для сокращения количества запросов к сети — вместо загрузки нескольких файлов, грузится только один. Также для уменьшении размеров и читаемости HTML-кода при многократном использовании векторной графики в разметке.

## Что такое SVG-спрайт?

Спрайт это метод, который помогает уменьшить количество запросов сети к графическим ресурсам. В давние времена спрайты применялись для растровой графики, так как грузить большое количество изображений (обычно это были иконки) было накладно из-за особенностей протокола [HTTP/1](/tools/http-protocol/). Для каждого запроса необходимо было открывать своё соединение и дожидаться его закрытия, и только после этого можно было переходить к загрузке следующего файла. При такой реализации тратилось много времени и ресурсов на установку и закрытие соединения. Чтобы сократить накладные расходы и был придуман способ объединения нескольких файлов в один.

В настоящее время в сети используется протокол HTTP/2, который позволяет открывать несколько параллельных соединений и снизить накладные расходы. Но всё равно важно следить за нагрузкой на сеть, так как пользователи могут столкнуться с ситуацией когда их интернет-соединение является медленным и скорость загрузки ресурсов может быть критичной.

Часто SVG-графика используется для создания системы иконок и её последующего использования на сайте. Можно по-разному добавлять [SVG-иконки](/html/svg/#kak-podklyuchat) на сайт, но наиболее распространённым способом является добавление иконок прямо в разметку страницы, так как это позволяет стилизовать SVG при помощи CSS. При таком подходе можно столкнуться с ситуацией когда на одной или нескольких страницах приходиться дублировать разметку вставляя одну и те же SVG-иконку (например, иконку удаления или редактирования данных).

![Таблица пользователей с набором повторяющихся иконок](images/table-with-users-example.jpg)
Таблица пользователей с набором повторяющихся иконок

Использование спрайтов в данном случае позволит избежать дублирования кода уменьшить вес HTML-файла. К тому же, если потребуется внести изменения, нужно будет изменить только один файл.

## Как создать SVG-спрайт

Предположим что уже имеется подготовленный набор отдельных SVG-иконок. Перейдём к формированию SVG-спрайта.

Для начала создадим обычную обёртку SVG-файла:

```xml
<?xml version="1.0" encoding="utf-8"?>
<svg xmlns="http://www.w3.org/2000/svg">
	...
</svg>
```

Далее каждая SVG-иконка помешается внутрь тега [`<symbol>`](https://developer.mozilla.org/en-US/docs/Web/SVG/Element/symbol), который предоставляет возможность группировать элементы. При этом данные объекты не отображаются до тех пор пока на них не будут ссылаться при помощи тега [`<use>`](https://developer.mozilla.org/en-US/docs/Web/SVG/Element/use).

```xml
<?xml version="1.0" encoding="utf-8"?>
<svg xmlns="http://www.w3.org/2000/svg">
  <symbol id="social-facebook" viewBox="0 0 6 12">
    <path d="M1.09903 2.72854C1.09903 3.00311 1.09903 4.22865 1.09903 4.22865H0V6.06299H1.09903V11.514H3.35667V6.06314H4.87165C4.87165 6.06314 5.01353 5.18359 5.08231 4.22189C4.88513 4.22189 3.36521 4.22189 3.36521 4.22189C3.36521 4.22189 3.36521 3.15472 3.36521 2.96767C3.36521 2.78022 3.61136 2.52806 3.85465 2.52806C4.09748 2.52806 4.60999 2.52806 5.08469 2.52806C5.08469 2.27831 5.08469 1.41538 5.08469 0.618408C4.45099 0.618408 3.73004 0.618408 3.41225 0.618408C1.04322 0.618282 1.09903 2.45445 1.09903 2.72854Z"/>
  </symbol>
    
  <symbol id="social-twitter" viewBox="0 0 16 11">
    <path d="M13.3758 4.62011C14.2231 4.55022 14.7977 4.16506 15.0189 3.64245C14.7133 3.83019 13.7646 4.03487 13.2407 3.83994C13.215 3.71684 13.1863 3.59991 13.1581 3.49434C12.7589 2.02841 11.392 0.847405 9.9598 0.990077C10.0757 0.943291 10.1932 0.899732 10.3104 0.860627C10.468 0.804161 11.393 0.653668 11.2473 0.327185C11.1246 0.040017 9.99448 0.544209 9.7817 0.610109C10.0626 0.504473 10.5271 0.322766 10.5769 0C10.1466 0.0590258 9.72411 0.262477 9.3977 0.558308C9.51554 0.431453 9.60494 0.276857 9.62391 0.110476C8.47615 0.843722 7.80569 2.322 7.26309 3.75598C6.83704 3.34308 6.45942 3.01793 6.12066 2.83738C5.17032 2.32775 4.03403 1.79603 2.25031 1.13387C2.19557 1.72402 2.54218 2.50872 3.54095 3.03055C3.32456 3.00159 2.92885 3.06622 2.61236 3.14201C2.74125 3.81809 3.16218 4.3751 4.30173 4.64445C3.78095 4.67882 3.51181 4.79733 3.26789 5.05276C3.50508 5.52297 4.08387 6.07637 5.12504 5.96277C3.96746 6.4617 4.65305 7.38567 5.59497 7.24787C3.98812 8.90757 1.45474 8.78559 0 7.39742C3.79824 12.573 12.0547 10.4583 13.2852 5.47317C14.207 5.48102 14.749 5.15384 15.085 4.79312C14.5539 4.88326 13.784 4.79011 13.3758 4.62011Z"/>
  </symbol>


  <symbol id="social-vk" viewBox="0 0 13 8">
    <path d="M12.8841 7.1355C12.8492 7.0724 12.633 6.56585 11.593 5.52472C10.5041 4.43452 10.6504 4.61154 11.9619 2.72647C12.7606 1.57842 13.08 0.877323 12.98 0.577604C12.8849 0.291906 12.2975 0.367274 12.2975 0.367274L10.3441 0.379543C10.3441 0.379543 10.1994 0.35851 10.0914 0.427744C9.98654 0.496101 9.9191 0.653848 9.9191 0.653848C9.9191 0.653848 9.60951 1.54249 9.19673 2.29792C8.32648 3.89204 7.97789 3.97617 7.83569 3.87714C7.50498 3.64666 7.58786 2.94994 7.58786 2.45567C7.58786 0.910625 7.80482 0.266491 7.16452 0.0999807C6.95163 0.0447692 6.79562 0.00796159 6.25202 0.00182698C5.55484 -0.00606037 4.96411 0.00445609 4.63015 0.180607C4.4075 0.298041 4.23605 0.560076 4.34088 0.574975C4.47007 0.593378 4.76259 0.659983 4.91779 0.887839C5.11849 1.18142 5.11118 1.84221 5.11118 1.84221C5.11118 1.84221 5.22657 3.66068 4.84222 3.88678C4.57814 4.0419 4.21655 3.72553 3.44056 2.27864C3.04322 1.53811 2.74257 0.7187 2.74257 0.7187C2.74257 0.7187 2.68488 0.566211 2.58168 0.484708C2.45655 0.385678 2.28104 0.354129 2.28104 0.354129L0.423525 0.366398C0.423525 0.366398 0.144817 0.375162 0.0424345 0.505741C-0.0485722 0.622299 0.0351215 0.862424 0.0351215 0.862424C0.0351215 0.862424 1.4896 4.53179 3.13585 6.38182C4.6464 8.0776 6.3609 7.9663 6.3609 7.9663H7.13771C7.13771 7.9663 7.37254 7.93825 7.49198 7.79891C7.60249 7.67096 7.59843 7.43083 7.59843 7.43083C7.59843 7.43083 7.58299 6.30645 8.06727 6.14081C8.54425 5.97781 9.15692 7.22752 9.80615 7.70864C10.2969 8.07234 10.6699 7.99259 10.6699 7.99259L12.4063 7.9663C12.4063 7.9663 13.3148 7.90583 12.8841 7.1355Z"/>
  </symbol>
</svg>
```
Каждый элемент `<symbol>` содержит атрибут `id`, с уникальным идентификатором, который будет использоваться для ссылки на иконку в HTML. Чтобы использовать иконку из спрайта на вашей веб-странице, вам нужно вставить следующий код:

```html
<svg class="social-icon" viewBox="0 0 24 24" width="24" height="24">
  <use href="sprite.svg#social-vk" x="0" y="0"></use>
</svg>
```

Здесь `href` указывает на файл спрайта с указанием `id` символа, содержащего нужное изображение. Полученные таким образом элементы можно стилизовать с помощью CSS, как и обычные HTML-элементы. Вот пример:

```css
.social-icon {
  background-color: black;
  fill: white;
  transition: fill 0.3s ease-in-out;
}

.social-icon:hover,
.social-icon:focus {
  fill: rgb(160 123 80);
}
```

Откройте демо в новой вкладке и проверьте что иконки грузятся как спрайт в одном файле.

<iframe title="Простой svg-спрайт" src="demos/sprite/" height="250"></iframe>

Преимущества данного метода:

- Сокращение количества HTTP-запросов;
- Возможность стилизации иконок с помощью CSS;
- Адаптивность и масштабируемость изображений без потери качества.

Недостатки:

- Нельзя использовать как фоновое изображение.

## SVG-спрайт для фона

Чтобы использовать SVG из спрайта как фоновое изображение придётся сформировать иконки в спрайте друг за другом (или по сетке). 

Изменение фонового изображение будет происходить при помощи изменения области просмотра SVG изображения. Делается это с помощью тега [`<view>`](https://developer.mozilla.org/en-US/docs/Web/SVG/Element/view). Данный тег связывает иконку со специальным идентификатором и определяет её область просмотра. Это похоже на то, что вы обрезаете одно из предопределённых окон просмотра, чтобы увидеть только определённый фрагмент изображения. В [спецификации SVG](https://www.w3.org/TR/SVG/linking.html#SVGFragmentIdentifiers) такой способ называется именованными фрагментами.

```xml
<svg width="24" height="72" viewBox="0 0 24 72" fill="none" xmlns="http://www.w3.org/2000/svg">
    <view id="icon-first-view" viewBox="0 0 24 24"/>
    <path d="M4 12V20C4 20.5304 ..."/>
    
    <view id="icon-first-view" viewBox="0 24 24 24"/>
    <path d="M4 12V20C4 20.5304 ..."/>

    <view id="icon-first-view" viewBox="0 48 24 24"/>
    <path d="M4 12V20C4 20.5304 ..."/>
</svg>
```

Атрибут `viewBox` здесь работает так же, как для [`<svg>`](/html/svg). Первые два значения определяют сдвиг области просмотра по осям _x_ и _y_, следующие два — размер иконки. В нашем примере мы имеем три иконки размером 24 на 24 пикселя, расположенные друг за другом по вертикали. Подробнее об атрибуте `viewBox` можно узнать в [статье](https://www.sarasoueidan.com/blog/svg-art-direction-using-viewbox/).

Для дальнейшего использования в CSS или HTML необходимо указать путь к файлу # и его идентификатор.

```css
  .image {
    background-image: url('fragments.svg#icon-first-view');
  }
```
Также можно воспользоваться альтернативным синтаксисом. Вместо того чтобы задавать внутри спрайта каждой иконке именованный фрагмент с использование тега ` <view>`, вы можете сразу при подключении файла указать область которую хотите просмотреть. Для этого после адреса файла необходимо воспользоваться параметрами `svgView` и `viewBox`, в котором указать желаемую область просмотра.

```css
  .image {
    background-image: url('fragments.svg#svgView(viewBox(0, 0, 24, 48))');
  }

  .image:hover,
  .image:focus {
    background-image: url('fragments.svg#svgView(viewBox(0, 24, 24, 48))');
  }
```
В данном примере при наведении курсора на иконку происходит смена области видимости внутри SVG-спрайта.

Недостатком такого подхода является то что вы не сможете стилизовать иконку при помощи CSS.

<iframe title="Использование именнованных фрагментов в svg-спрайте" src="demos/fragments/" height="150"></iframe>

## Использование SVG-спрайта как стек
Данный способ также использует именованные фрагменты, но в отличии от предыдущего способа иконки в спрайте располагаются не последовательно друг за другом, а одна под другой. Каждая иконка скрыта по умолчанию и становится видна, при ссылке на неё через именованный фрагмент.

Как и в случае с `<symbol>`, наши значки не занимают своё место, поскольку они наложены друг на друга. Но они не скрыты по умолчанию, в отличие от `<symbol>`. Вот почему мы скрываем их с помощью `display: none;`, но не всех, а только тех, на которые не нацелен идентификатор в URL-адресе спрайта.

```xml
<svg xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      g {
        display: none;
      }
      g:target {
        display: inline;
      }
    </style>
  </defs>

  <g id="cat">
    <path d="M9 13.125C9 13.3475 ..." fill="black"/>
  </g>

  <g id="dog">
    <path d="M22.4728 11.7187L20.9334 ..." fill="black"/>
  </g>
</svg>
```

<iframe title="Стек изображений" src="demos/stack/" height="150"></iframe>

Существую разные способы использования SVG-спрайтов, каждый из которых имеет свои преимущества и недостатки. В одних случаях можно использовать иконки как фоновые изображение, но нельзя стилизовать их. В других наоборот. Важно знать различные способы применения SVG-спрайтов и их особенности, а также правильно применять их в той или иной задаче.

## Подсказки

💡 Если использовать иконку из SVG-спрайта как фоновое изображение и при этом нужно при каком-либо взаимодействии изменить её стили (например, при наведении курсора изменить цвет), можно создать копию необходимой иконки с нужными стилями и при взаимодействии менять одну иконку на другую.
