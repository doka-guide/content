---
title: "Атрибуты `defer` и `async`"
authors:
  - ra1nbow1
keywords:
  - defer
  - async
tags:
  - doka
---

## Кратко

Обычно браузеры загружают [`<script>`](/html/script/) синхронно, во время разбора документа. Поэтому принято добавлять скрипты в конец документа, перед `</body>`, чтобы они не тормозили загрузку страницы. Но при помощи атрибутов `defer` и `async`можно явно управлять порядком загрузки и выполнения скриптов.

Скрипты с атрибутами `defer` выполняются последовательно, а с `async` – нет. Кроме того, `defer` всегда ждёт, пока весь HTML-документ будет готов, а `async` – нет.

## Атрибут `async`

Это логический атрибут, указывающий браузеру, если возможно, загружать скрипт, указанный в атрибуте `src`, асинхронно.

Скрипт выполняется полностью асинхронно. Это означает, что файл будет выполняться без ожидания загрузки и отображения веб-страницы. При обнаружении `<script async src="...">` браузер не останавливает обработку страницы, а спокойно работает дальше. Когда скрипт будет загружен – он выполнится.

```html
<script src="script1.js" defer></script>
<script src="script2.js" defer></script>
```

Первым выполнится тот скрипт, который быстрее загрузится.

Поддерживается всеми браузерами, кроме IE9-.

## Атрибут `defer`

Это логический атрибут, указывающий браузеру, что скрипт должен выполняться после разбора документа, но до события `DOMContentLoaded`.
Скрипты с атрибутом `defer` будут предотвращать запуск события `DOMContentLoaded` до тех пор, пока скрипт не загрузится полностью и не завершится его инициализация.

```html
<script src="script1.js" defer></script>
<script src="script2.js" defer></script>
```

Первым всегда выполнится `script1.js`, который подключён раньше. Даже если `script2.js` загрузится раньше, он будет выполнен после первого скрипта.

## Применение

На практике `defer` используется для скриптов, которым требуется доступ ко всему [DOM-дереву](/js/dom/) или если важен их относительный порядок выполнения.

А `async` хорош для независимых скриптов, например счётчиков и рекламы, относительный порядок выполнения которых не играет роли.
