---
title: "Атрибут `d`"
description: "SVG атрибут описания пути для элемента <path>"
authors:
  - asmalcev
related:
  - html/svg
tags:
  - doka
  - svg
---

## Кратко

Атрибут `d` используется для описания пути, который должен быть отрисован элементом `<path>`. Значением атрибута является строка, содержащая список команд, написанных по собственному синтаксису.

## Пример

```html
<svg width="300" height="300">
  <path
    d="M 190 240
       Q 90  240
         90  190
       T 190 140
       L 190 40
       Z"
    stroke="white"
    stroke-width="4"
    fill="none" />
</svg>
```

<iframe title="Простой пример" src="demos/example/" height="450"></iframe>

## Описание синтаксиса команд

Команды атрибута `d` состоят из одной буквы и нескольких чисел. Доступные команды:

- Перемещение кисти: `M`, `m`
- Прямая линия: `L`, `l`, `H`, `h`, `V`, `v`
- Кубическая кривая Безье: `C`, `c`, `S`, `s`
- Квадратичная кривая Безье: `Q`, `q`, `T`, `t`
- Эллиптическая кривая: `A`, `a`
- Закрытие пути: `Z`, `z`

Каждая буква не случайно написана в верхнем и нижнем регистрах — все дело в том, что регистр команды влияет на то, как будут обработаны переданные координаты. Заглавные буквы означают работу с абсолютными координатами, а строчные — с относительными.

Текущей позицией будем называть точку, в которой находится кисть перед выполнением команды.

### Команды перемещения кисти

| Команда | Параметры    | Описание                                                   |
| ------- | ------------ | ---------------------------------------------------------- |
| `M`     | (`x` `y`)+   | Перемещение кисти в точку `x, y`                           |
| `m`     | (`dx` `dy`)+ | Перемещение кисти на `dx, dy` относительно текущей позиции |

Если передать в команду несколько точек, то начиная со второй точки будут выполнены не перемещения кисти, а рисование прямых линий как при использовании команды прямой линии `L` / `l`.

```html
<svg width="300" height="300">
  <path
    d="M 50 125
       L 150 225
       M 150 50
         250 150"
    stroke="white"
    stroke-width="4"
    fill="none"
  />
</svg>
```

<iframe title="Команда перемещение кисти" src="demos/m/" height="450"></iframe>

### Команды прямых линий

| Команда | Параметры    | Описание                                                         |
| ------- | ------------ | ---------------------------------------------------------------- |
| `L`     | (`x` `y`)+   | Прямая линия до точки `x,y`                                      |
| `l`     | (`dx` `dy`)+ | Прямая линия до точки находящейся на `dx, dy` от текущей позиции |
| `H`     | (`x`)+       | Горизонтальная линия до координаты `x`                           |
| `h`     | (`dx`)+      | Горизонтальная линия длиной `dx`                                 |
| `V`     | (`y`)+       | Вертикальная линия до координаты `y`                             |
| `v`     | (`dy`)+      | Вертикальная линия длиной `dy`                                   |

```html
<svg width="300" height="300">
  <path
    d="M 50 50
       V 150
       H 150
       L 250 250"
    stroke="white"
    stroke-width="4"
    fill="none"
  />
</svg>
```

<iframe title="Команды прямых линий" src="demos/lhv/" height="450"></iframe>

### Команды кубических кривых Безье

| Команда | Параметры                            | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| ------- | ------------------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `C`     | (`x1` `y1` `x2` `y2` `x` `y`)+       | Кубическая кривая Безье от текущей позиции до `x, y`, где `x1, y1` и `x2, y2` являются опорными точками                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `c`     | (`dx1` `dy1` `dx2` `dy2` `dx` `dy`)+ | Кубическая кривая Безье от текущей позиции до точки с координатами `текущий x + dx, текущий y + dy`, где опорными являются точки, полученные смещением текущей позиции на `dx1, dy1` и `dx2, dy2` соответственно                                                                                                                                                                                                                                                                                                           |
| `S`     | (`x2` `y2` `x` `y`)+                 | Кубическая кривая Безье от текущей позиции до `x, y`, где `x2, y2` координаты конечной опорной точки. Рисует более гладкую кубическую кривую Безье за счет того, что берет координаты начальной опорной точки `x1, y1` на основании предыдущей команды: если предыдущая команда была кривой Безье, то опорная точка будет отражением конечной опорной точки предыдущей кривой, иначе опорная точка будет совпадать с текущей позицией                                                                                      |
| `s`     | (`dx2` `dy2` `dx` `dy`)+             | Кубическая кривая Безье от текущей позиции до точки с координатами `текущий x + dx, текущий y + dy`, где конечная опорная точка будет иметь координаты `текущий x + dx2, текущий y + dy2`. Рисует более гладкую кубическую кривую Безье за счет того, что берет координаты начальной опорной точки `x1, y1` на основании предыдущей команды: если предыдущая команда была кривой Безье, то опорная точка будет отражением конечной опорной точки предыдущей кривой, иначе опорная точка будет совпадать с текущей позицией |

Красными точками отмечены опорные, начальные и конечные точки кривых. Синим цветом отмечена промежуточная опорная точка второй кривой, полученная отражением промежуточной опорной точки первой кривой.

```html
<svg width="300" height="300">
  <path
    d="M 50 50
        C 150 50
          50 150
          150 150
        S 150 250
          250 250"
    stroke="white"
    stroke-width="4"
    fill="none"
  />
  <circle r="5" cx="50" cy="50" fill="red" />
  <circle r="5" cx="150" cy="50" fill="red" />
  <circle r="5" cx="50" cy="150" fill="red" />
  <circle r="5" cx="150" cy="150" fill="red" />
  <circle r="5" cx="150" cy="250" fill="red" />
  <circle r="5" cx="250" cy="250" fill="red" />
  <circle r="5" cx="250" cy="150" fill="blue" />
</svg>
```

<iframe title="Команды кубической кривой Безье" src="demos/quadratic-bezier-curve/" height="450"></iframe>

### Команды квадратичных кривых Безье

| Команда | Параметры                | Описание                                                                                                                                                                                                                                                                                                                                                                                                  |
| ------- | ------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `Q`     | (`x1` `y1` `x` `y`)+     | Квадратичная кривая Безье от текущей позиции до `x, y`, где `x1, y1` является опорной точкой                                                                                                                                                                                                                                                                                                              |
| `q`     | (`dx1` `dy1` `dx` `dy`)+ | Квадратичная кривая Безье от текущей позиции до точки с координатами `текущий x + dx, текущий y + dy`, где опорной является точка, полученная смещением текущей позиции на `dx1, dy1`                                                                                                                                                                                                                     |
| `T`     | (`x` `y`)+               | Квадратичная кривая Безье от текущей позиции до `x, y`. Рисует более гладкую квадратичную кривую Безье за счет того, что берет координаты опорной точки `x1, y1` на основании предыдущей команды: если предыдущая команда была кривой Безье, то опорная точка будет отражением конечной опорной точки предыдущей кривой, иначе опорная точка будет совпадать с текущей позицией                           |
| `t`     | (`dx` `dy`)+             | Квадратичная кривая Безье от текущей позиции до `текущий x + dx, текущий y + dy`. Рисует более гладкую квадратичную кривую Безье за счет того, что берет координаты опорной точки `x1, y1` на основании предыдущей команды: если предыдущая команда была кривой Безье, то опорная точка будет отражением конечной опорной точки предыдущей кривой, иначе опорная точка будет совпадать с текущей позицией |

Красными точками отмечены опорные, начальные и конечные точки кривых. Синим цветом отмечена промежуточная опорная точка второй кривой, полученная отражением промежуточной опорной точки первой кривой.

```html
<svg width="300" height="300">
  <path
    d="M 50 50
       Q 150 50
         150 150
       T 250 250"
    stroke="white"
    stroke-width="4"
    fill="none"
  />
  <circle r="5" cx="50" cy="50" fill="red" />
  <circle r="5" cx="150" cy="50" fill="red" />
  <circle r="5" cx="150" cy="150" fill="red" />
  <circle r="5" cx="250" cy="250" fill="red" />
  <circle r="5" cx="150" cy="250" fill="blue" />
</svg>
```

<iframe title="Команды квадратичной кривой Безье" src="demos/quadratic-bezier-curve/" height="450"></iframe>


### Команды эллиптических кривых

<table>
  <tr>
    <th>Команда</th>
    <th>Параметры</th>
    <th>Описание</th>
  </tr>
  <tr>
    <td>A</td>
    <td>(<code>rx</code> <code>ry</code> <code>angle</code> <code>large-arc-flag</code> <code>sweep-flag</code> <code>x</code> <code>y</code>)+</td>
    <td>Эллиптическая кривая с горизонтальным радиусом <code>rx</code> и вертикальным радиусом <code>ry</code>, которая берет начало в текущей точке и завершается в точке с координатами <code>x, y</code>. <code>angle</code> отвечает за поворт кривой относительно оси абсцисс. Флаг <code>large-arc-flag</code> отвечает за выбор большей дуги при значении <code>1</code> и меньшей при значении <code>0</code>. Флаг <code>sweep-flag</code> отвечает за выбор направления дуги: <code>1</code> — по часовой стрелке, <code>0</code> — против часовой стрелки</td>
  </tr>
  <tr>
    <td>a</td>
    <td>(<code>rx</code> <code>ry</code> <code>angle</code> <code>large-arc-flag</code> <code>sweep-flag</code> <code>dx</code> <code>dy</code>)+</td>
    <td>Эллиптическая кривая с горизонтальным радиусом <code>rx</code> и вертикальным радиусом <code>ry</code>, которая берет начало в текущей точке и завершается в точке с координатами <code>текущий x + dx, текущий y + dy</code>. <code>angle</code> отвечает за поворт кривой относительно оси абсцисс. Флаг <code>large-arc-flag</code> отвечает за выбор большей дуги при значении <code>1</code> и меньшей при значении <code>0</code>. Флаг <code>sweep-flag</code> отвечает за выбор направления дуги: <code>1</code> — по часовой стрелке, <code>0</code> — против часовой стрелки</td>
  </tr>
</table>

Лучше понять, как флаги влияют на отображение кривой помогут следующие демки. Красными точками отмечены начальная и конечная позиция кисти при рисовании кривой. Белым цветом отмечена дуга, которая нарисована с указанными значениями флагов. Серым отмечены остальные варианты комбинаций флагов.

```html
<svg width="300" height="300">
  <path
    d="M 125 175 A 50 50 0 large-arc-flag sweep-flag 175 125"
    stroke="white"
    stroke-width="4"
    fill="none"
  />
  <!-- large-arc-flag и sweep-flag нужно заменить значениями из примеров -->
  <circle r="5" cx="125" cy="175" fill="red" />
  <circle r="5" cx="175" cy="125" fill="red" />
</svg>
```

1. Короткая дуга против часовой стрелки. `large-arc-flag = 0`, `sweep-flag = 0`

<iframe title="Короткая дуга против часовой стрелки" src="demos/arc-large-arc-flag-0-sweep-flag-0/" height="450"></iframe>

2. Короткая дуга по часовой стрелке. `large-arc-flag = 0`, `sweep-flag = 1`

<iframe title="Короткая дуга по часовой стрелке" src="demos/arc-large-arc-flag-0-sweep-flag-1/" height="450"></iframe>

3. Длинная дуга против часовой стрелки. `large-arc-flag = 1`, `sweep-flag = 0`

<iframe title="Длинная дуга против часовой стрелки" src="demos/arc-large-arc-flag-1-sweep-flag-0/" height="450"></iframe>

4. Длинная дуга по часовой стрелке. `large-arc-flag = 1`, `sweep-flag = 1`

<iframe title="Длинная дуга по часовой стрелке" src="demos/arc-large-arc-flag-1-sweep-flag-1/" height="450"></iframe>

Стоит отметить, что нарисовать круг или эллипс с помощью этой команды не получится. Но если все-таки стоит такая задача, нужного эффекта можно добиться, воспользовавшись двумя кривыми:

```html
<svg width="300" height="300">
  <path
    d="M 50 150
       A 100 100 0 0 1 150 50
         100 100 0 1 1 50 150"
    stroke="white"
    stroke-width="4"
    fill="none"
  />
</svg>
```

<iframe title="Полная окружность" src="demos/full-circle/" height="450"></iframe>

### Команды закрытия пути

| Команда  | Параметры | Описание                                                    |
| -------- | --------- | ----------------------------------------------------------- |
| `Z`, `z` |           | Проводит прямую линию до начальной точки текущей части пути |

В примере из начала статьи используется команда закрытия пути, которая проводит прямую линию до начальной точки пути.

```html
<svg width="300" height="300">
  <path
    d="M 190 240
       Q 90  240
         90  190
       T 190 140
       L 190 40
       Z"
    stroke="white"
    stroke-width="4"
    fill="none" />
</svg>
```

<iframe title="Команда закрытия пути" src="demos/example/" height="450"></iframe>

В описании команды закрытия пути указано, что она проводит линию до начальной точки <u>текущей</u> части пути. Это означает, что путь может состоять из нескольких частей, начинаясь командой перемещения кисти `M`/`m` и заканчиваясь командой закрытия пути `Z`/`z`.

```html
<svg width="300" height="300">
  <path
    d="M 50 50
       V 125
       H 125
       Z
       M 250 250
       V 175
       H 175
       Z"
    stroke="white"
    stroke-width="4"
    fill="none"
  />
</svg>
```

<iframe title="Команда закрытия пути" src="demos/z/" height="450"></iframe>

### Нюансы синтаксиса описания пути

Числа в описании пути могут быть разделены пробельными символами или запятыми, причем нет ограничений в каких ситуациях запятую можно, а в каких нет. Все представленные варианты приведут к одинаковому результату:
- `M 50 50 L 150 50 150 150` — вообще не используем запятые
- `M 50 50 L 150 50, 150 150` — разделяем пары координаты запятыми
- `M 50 50 L 150, 50 150, 150` — разделяем числа внутри пары координаты запятыми
- `M 50 50 L 150, 50, 150, 150` — ставим запятые и между парами, и внутри пар
- `M50,50L150,50,150,150` — вообще не используем пробелы

[Подробнее про EBNF грамматику описания пути](https://svgwg.org/svg2-draft/paths.html#PathDataBNF)

## Использование в CSS

Значение атрибута `d` можно задать в CSS с помощью функции `path()`.

```css
.path {
  d: path('M 190 240 Q 90  240 90  190 T 190 140 L 190 40 Z');
}
```
