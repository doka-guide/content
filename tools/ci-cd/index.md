---
title: "Что такое CI/CD?"
description: "Совокупность технологий для автоматизации процесса доставки приложений до потребителей"
authors:
  - igsekor
tags:
  - article
keywords:
  - deploy
  - интеграция
  - публикация
  - jenkins
  - github actions
  - gitlab ci
  - bitbucket pipelines
  - travis
  - puppeteer
  - selenium
---

## Кратко

CI/CD (Continuous Integration / Continuous Delivery) — непрерывная интеграция и доставка — это подход к разработке программного продукта, при использовании которого задачи сборки, публикации, тестирования и прочие автоматизированы полностью или частично. Очень часто автоматизация вплетена в бизнес-процессы продуктовой команды или компании, но практики CI/CD могут быть прекрасно внедрены и в проекты, в которых участвует только один разработчик.

## Как понять

Представьте ситуацию: Маша весь день писала код, отладила у себя на компьютере всё так, что багов найти не удалось. Вася начал запускать приложение у себя, и вообще не смог запустить сборку. Каких-то пакетов не хватало, нашлись браузеры, в которых приложение не запустилось даже после установки всего необходимого. Часто ли вы сталкивались с подобной ситуацией? Единое окружение помогло бы точно.

Понятие CI/CD активно стало внедряться в процессы разработки программного обеспечения, когда стало очевидно, что для большинства прикладных программ великолепно подходят практики Agile, о которых можно подробнее почитать в статье «[Что такое методологии разработки и Agile](/tools/agile/)». Оказалось, что каждую итерацию цикла разработки можно ускорить с помощью автоматизации разных процессов.

Применение CI/CD оказалось очень хорошим решением, и уже вскоре появились первые инструменты. В мире веб-разработки такими инструментами стали различные системы сборки (подробнее в статье «[Системы сборки](/tools/bundlers/)»), менеджеры пакетов (подробнее в статье «[Пакетные менеджеры](/tools/package-managers/)») и тестирования.

### Преимущества

- Инструменты CI/CD позволяют быстро выводить программный продукт на рынок, исправлять ошибки, внедрять новый функционал.
- Автоматизация позволяет снизить нагрузку на членов команды, облегчает тестирование и уменьшает количество ошибок на каждой итерации. Главный плюс — это быстрая обратная связь.
- Гибкий план позволяет быстро перераспределять ресурсы команды на решение действительно важных задач.

### Недостатки

- Часто инструменты CI/CD воспринимаются как швейцарский нож, который может справится с любыми задачами. Однако, при недостатке опыта это может приводить к существенному усложнению процессов в команде.
- При снижении влияния человеческого фактора проблемы взаимодействия внутри команды CI/CD решить не могут.
- Все члены команды должны работать в единой экосистеме при наличии адекватного руководством и грамотного проектного управления.

## Основные принципы

Поскольку речь идёт об интеграции и доставке приложений для потребителей, набор инструментов тесно связан с системой контролей версий, серверной инфраструктурой и средствами командного взаимодействия.

В основе разработки и использования CI/CD лежат следующие принципы:

- Сегрегация ответственности заинтересованных сторон.
- Снижение риска.
- Короткий цикл обратной связи.
- Реализация среды.

В рамках гибкой методологии разработки программного обеспечения участвует много сторон: владельцы продукта, маркетологи, дизайнеры, разработчики, тестировщики, инженеры по инфраструктуре, пользователи продукта. Сегрегация ответственности означает, что ответственность за разные стороны продукта лежит на разных ролях. Интегрировать (автоматизировать) все процессы взаимодействия между ними как раз и помогают инструменты CI/CD.

Например, по запросу от пользователей или владельца продукта дизайнеры дорабатывают интерфейс пользователя, разработчики пишут код, исправляют ошибки и внедряют новый функционал. Затем в дело вступают тестировщики, которым приложение приходит в собранном виде, пройдя все необходимые автоматические проверки на качество и правильность работы кода. После успешного тестирования пользователи получают готовый к использованию продукт, отмечают баги и видят, как функционал может быть ещё расширен. Процесс циклически повторяется вновь и вновь.

Применение автоматизации процессов разработки снижает риск ошибок, позволяет оперативно чинить то, что не работает. Настройка инструментов CI/CD затрагивает и такую часть разработки как создание единого окружения, в котором ведётся разработка программного продукта. Для разработчика это крайне важно. Например, использование одних и тех же npm-пакетов и инструментов тестирования позволяет разрабатывать приложение по единым стандартам качества. Случайные ошибки из-за неправильного окружения или другой операционной системы практически исключены.

## Этапы интеграции и доставки приложений

Работа системы инструментов CI/CD основана на цикличности, что прекрасно укладывается в рамки гибкой методологии разработки программного обеспечения. Цикл применения инструментов состоит из следующих этапов:

- Написание кода.
- Сборка.
- Ручное тестирование.
- Релиз.
- Развёртывание.
- Поддержка и мониторинг.
- Планирование.

### Написание кода

На этом этапе самым главным инструментом является система контроля версий. Обычно это [Git](https://git-scm.com). Важный элемент здесь модель ветвления — то есть как используются ветки в разработке. Например, в проектах на GitHub, как правило, используется модель ветвления [GitHub Flow](https://guides.github.com/introduction/flow/):

1. Разработчик делает форк репозитория к себе в аккаунт или локально на компьютере свою ветку. Форк — это полная копия (зеркало) репозитория на какой-то определённый момент времени, которую можно обновлять при необходимости.
2. После этого, разработчик вносит изменения в форке или своей изолированной ветке.
3. Затем формируется pull request — это запрос на слияние в основную ветку.
4. В рамках pull request можно проверить все предлагаемые изменения, обсудить решения и прийти к приемлемому решению.
5. После утверждения всех изменений, они вливаются в основную ветку репозитория.

Существуют и другие модели ветвления, например, Git-flow, о которой хорошо рассказывается в статье «[A successful Git branching model](https://nvie.com/posts/a-successful-git-branching-model/)» на английском языке и в переводе на русском «[Удачная модель ветвления для Git](https://habr.com/ru/post/106912/)».

### Сборка

После написания и первичного тестирования на локальном компьютере разработчика код попадает на сервер, и производится сборка. Чаще всего тестовая или готовая к публикации сборка настраивается и работает на сервере. В последнее время для сборки чаще всего используются контейнеры, например, Docker-контейнеры. Подробнее о них можно почитать в серии статей о Docker:

- «[Что такое Docker?](/tools/docker/)».
- «[Как устроен Dockerfile](/tools/dockerfile/)».
- «[Управление данными в Docker](/tools/docker-data-management/)».
- «[Мультиконтейнерное приложение и Docker Compose](/tools/docker-compose/)».

Для автоматизации сборки могут использоваться различные системы, например, [Jenkins](https://www.jenkins.io), [GitLab CI/CD](https://docs.gitlab.com/ee/ci/), [Bitbucket Pipelines](https://bitbucket.org/product/features/pipelines), [Buddy](https://buddy.works), [Travis CI](https://travis-ci.org), [JetBrains TeamCity](https://www.jetbrains.com/teamcity/), [Buildbot](https://buildbot.net), [Semaphore](https://semaphoreci.com), [Concourse](https://concourse-ci.org), [GitHub Actions](/tools/github-actions/) и другие инструменты. Сборку поддерживают популярные и специализированные хостинги, например [Netlify](https://www.netlify.com/products/build/).

### Ручное тестирование

После первичной подготовки кода, продукту назначается тег с номером версии будущего релиза, с пометкой номера тестовой сборки для детального автоматизированного и ручного тестирования. Например, если номер будущего релиза _v.2.4.5_, то номер первой тестовой сборки может быть указан так: _v.2.4.5-1_. На этом этапе преобладает ручное тестирование продукта, поиск и планирование исправления ошибок. После нескольких итераций продукт признаётся готовым к релизу и продукт переходит на следующий этап.

На этом этапе широко применяются интеграционные тесты, e2e тесты, ручное и автоматизированное тестирование UI/UX. Для этого могут использоваться различные инструменты. Например, [jest](https://jestjs.io) может покрыть задачи модульного, интеграционного и e2e тестирования веб-приложения. Для генерации скриншотов веб-приложения и автоматического сравнения с эталоном можно использовать [selenium](https://www.selenium.dev) или [puppeteer](https://pptr.dev). При этом можно промоделировать не только загрузку веб-приложения и скриншоты экранов разных размеров, можно посмотреть, как будущий пользователь будет взаимодействовать с приложением с помощью сценариев.

### Релиз

Есть разные типы цикла релизов, о которых подробно рассказывается в статье «[Что такое методологии разработки и Agile](/tools/agile/)». В зависимости от особенностей продукта, состава команды и задач владельцев продукта, назначается периодичность релизов продукта. Важен не только сам релиз, но и то, как работала команда на очередном ветке.

Инструменты CI/CD на этом этапе отвечают в основном за сбор различной статистической информации. Это могут быть как пользовательские метрики (например, Яндекс Метрика или Google Analytics), так метрики, принятые внутри команды для отслеживания эффективности того или иного члена команды (например, можно отслеживать количество выполненных задач, скорость их выполнения, инициативность и профессиональный рост с помощью встроенных инструментов [Jira](https://www.atlassian.com/ru/software/jira), [Wrike](https://www.wrike.com) или [Trello](https://trello.com/home)).

### Развёртывание

Наконец наступает этап доставки продукта до конечных потребителей. Сложность развёртывание продукта связана со сложностью инфраструктуры (архитектурой построения серверов, различными оптимизациями загрузки и работы приложения, кэшированием). Простые веб-приложения особенного внимания с точки зрения инфраструктуры не требуют. Но есть крупные онлайн-магазины, поисковые системы, стриминговые сервисы, для которых инфраструктурные задачи могут быть чуть ли ни самыми важными с точки зрения конкуренции на рынке.

### Поддержка и мониторинг

Наконец-то приложение доступно для рядовых пользователей. Здесь важны скорость и точность ответов на вопросы пользователей (то есть организации службы поддержки пользователей приложения) и встроенная грамотная маркетинговая политика. Для решения поставленных задач тоже существует множество инструментов, описание которых выходит за рамки задач разработчиков. В основном эти инструменты не сильно отличаются от инструментов для обычной офисной работы в рамках крупной компании (IP-телефония, чаты, электронная почта, различные менеджеры задач, подготовка автоматических отчётов и другие программные и аппаратные инструменты). В поддержке современных продуктов часто используются голосовые помощники и чат-боты. Практически все эти инструменты не являются инструментами CI/CD, но почти всегда предоставляют API, чтобы можно было настроить глубокую интеграцию между различными этапами для повышения качества продукта.

### Планирование

Важным этапом является и планирование следующего цикла. На основе пользовательского опыта формируется бэклог задач для реализации, назначаются приоритеты и исполнители. После этого цикл CI/CD замыкается.

:::callout 👆

Необходимо помнить, что некоторые этапы CI/CD могут быть скорректированы или пропущены вовсе. Конкретная детализация зависит от конкретного продукта, состава и квалификации команды, а также особенностей выведения продукта на рынок.

:::
