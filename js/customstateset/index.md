---
title: "`CustomStateSet`"
description: "–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π —Å—Ç–∏–ª–∏–∑–æ–≤–∞—Ç—å –∏—Ö —á–µ—Ä–µ–∑ CSS."
authors:
  - drakesbot12
keywords:
  - customstateset
  - —Å–æ—Å—Ç–æ—è–Ω–∏—è
  - web-components
  - element
  - states
  - custom
related:
  - js/window-customelements
  - html/slot
  - css/state
tags:
  - doka
---

## –ö—Ä–∞—Ç–∫–æ

`CustomStateSet` ‚Äî —ç—Ç–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ –∞–≤—Ç–æ–Ω–æ–º–Ω—ã—Ö –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤. –ü–æ–∑–≤–æ–ª—è–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –∏ —É–¥–∞–ª—è—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞—Ç–µ–º –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ CSS —Å–µ–ª–µ–∫—Ç–æ—Ä–∞—Ö.

## –ü—Ä–∏–º–µ—Ä

```javascript
class MyCheckbox extends HTMLElement {
  constructor() {
    super();
    this._internals = this.attachInternals();
    this.addEventListener('click', () => this.toggle());
  }
  connectedCallback() {
    this.attachShadow({ mode: 'open' }).innerHTML = `
      <style>
        :host { display: flex; cursor: pointer; align-items: center; gap: .5rem; }
        :host::before { content: '[ ]'; font-family: monospace; }
        :host::after { content: '–ö–∞–∫–æ–π-—Ç–æ –∫–∞—Å—Ç–æ–º–Ω—ã–π —á–µ–∫–±–æ–∫—Å'; font-family: monospace; }
        :host(:state(checked))::before { content: '[x]'; }
        :host(:state(checked))::after { content: '–ß–µ–∫–±–æ–∫—Å cheked!'; }
      </style>
    `;
  }
  get checked() {
    return this._internals.states.has('checked');
  }
  set checked(value) {
    if (value) {
      this._internals.states.add('checked');
    } else {
      this._internals.states.delete('checked');
    }
  }
  toggle() {
    this.checked = !this.checked;
  }
}

customElements.define('my-checkbox', MyCheckbox);
```

```html
<my-checkbox>–≠—Ç–æ—Ç —Ç–µ–∫—Å—Ç –Ω–µ –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤ –∫–∞—Å—Ç–æ–º–Ω–æ–º —ç–ª–µ–º–µ–Ω—Ç–µ –Ω–µ—Ç—É —Ç–µ–≥–∞ slot</my-checkbox>
```

<iframe title="–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ —á–µ–∫–±–æ–∫—Å–∞" src="demos/basic/" height="150"></iframe>

## –ö–∞–∫ –ø–∏—à–µ—Ç—Å—è

```javascript
// –ü–æ–ª—É—á–µ–Ω–∏–µ CustomStateSet
const internals = element.attachInternals();
const states = internals.states;

// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
states.add('my-state');
// –£–¥–∞–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
states.delete('my-state');
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
states.has('my-state');
// –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π
states.clear();
```

### –°–≤–æ–π—Å—Ç–≤–∞

- #### `.size`

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ—Å—Ç–æ—è–Ω–∏–π –≤ –Ω–∞–±–æ—Ä–µ.

```javascript
const states = element.attachInternals().states;
states.add('loading');
states.add('error');

console.log(states.size); // 2
```

### –ú–µ—Ç–æ–¥—ã

- #### `.add(value)`

–î–æ–±–∞–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ –Ω–∞–±–æ—Ä. –ï—Å–ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç.

```javascript
states.add('checked');
states.add('disabled');
```

- #### `.clear()`

–£–¥–∞–ª—è–µ—Ç –≤—Å–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–∑ –Ω–∞–±–æ—Ä–∞.

```javascript
states.clear(); // –£–¥–∞–ª—è–µ—Ç –≤—Å–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
```

- #### `.delete(value)`

–£–¥–∞–ª—è–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–∑ –Ω–∞–±–æ—Ä–∞. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `true`, –µ—Å–ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±—ã–ª–æ —É–¥–∞–ª–µ–Ω–æ, –∏ `false`, –µ—Å–ª–∏ –µ–≥–æ –Ω–µ –±—ã–ª–æ.

```javascript
const wasRemoved = states.delete('checked');
console.log(wasRemoved); // true –∏–ª–∏ false
```

- #### `.has(value)`

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –µ—Å—Ç—å –ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ –Ω–∞–±–æ—Ä–µ. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `true` –∏–ª–∏ `false`.

```javascript
if (states.has('loading')) {
  console.log('–≠–ª–µ–º–µ–Ω—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è');
}
```

- #### `.forEach(callback)`

–í—ã–ø–æ–ª–Ω—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ –Ω–∞–±–æ—Ä–µ.

```javascript
states.forEach((state, index) => {
  console.log(`–°–æ—Å—Ç–æ—è–Ω–∏–µ ${index}: ${state}`);
});
```

- #### `.entries()`

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏—Ç–µ—Ä–∞—Ç–æ—Ä —Å –ø–∞—Ä–∞–º–∏ `[–∑–Ω–∞—á–µ–Ω–∏–µ, –∑–Ω–∞—á–µ–Ω–∏–µ]` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è.

```javascript
for (const [key, value] of states.entries()) {
  console.log(`${key} = ${value}`);
}
```

- #### `.values()`

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏—Ç–µ—Ä–∞—Ç–æ—Ä —Å–æ –≤—Å–µ–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π.

```javascript
for (const state of states.values()) {
  console.log(state);
}
```

- #### `.keys()`

–ê–ª–∏–∞—Å –¥–ª—è `values()`. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏—Ç–µ—Ä–∞—Ç–æ—Ä —Å–æ –≤—Å–µ–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π.

```javascript
for (const state of states.keys()) {
  console.log(state);
}
```

### –ò—Ç–µ—Ä–∞—Ü–∏—è

`CustomStateSet` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∏—Ç–µ—Ä–∞—Ü–∏—é, –∫–∞–∫ –æ–±—ã—á–Ω—ã–π `Set`:

```javascript
// –ß–µ—Ä–µ–∑ for...of
for (const state of states) {
  console.log(state);
}

// –ß–µ—Ä–µ–∑ spread –æ–ø–µ—Ä–∞—Ç–æ—Ä
const stateArray = [...states];
```

## –ö–∞–∫ –ø–æ–Ω—è—Ç—å

`CustomStateSet` ‚Äî —ç—Ç–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è, –ø–æ—Ö–æ–∂–∞—è –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π `Set`, –Ω–æ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–∞—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ (Web Components). –ö–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç —ç—Ç–æ–≥–æ –Ω–∞–±–æ—Ä–∞ ‚Äî —ç—Ç–æ –æ—Ç–¥–µ–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä: `checked`, `open`, `active` –∏ —Ç.–¥.

–ö–æ–≥–¥–∞ –≤—ã –¥–æ–±–∞–≤–ª—è–µ—Ç–µ –∏–ª–∏ —É–¥–∞–ª—è–µ—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥—ã `CustomStateSet`, —ç—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç–µ –∏ –º–æ–≥—É—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –¥–ª—è —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ CSS-–ø—Å–µ–≤–¥–æ–∫–ª–∞—Å—Å [`:state()`](/css/state/). –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –º–µ–Ω—è—Ç—å –≤–Ω–µ—à–Ω–∏–π –≤–∏–¥ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –Ω–µ –ø—Ä–∏–±–µ–≥–∞—è –∫ —Ä—É—á–Ω–æ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –∫–ª–∞—Å—Å–∞–º–∏ –∏–ª–∏ –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏.

–ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –≤ –Ω–∞–±–æ—Ä–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π —ç–ª–µ–º–µ–Ω—Ç–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è `checked`, —Ç–æ –≤ CSS –º–æ–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å:

## –ü–æ–¥—Å–∫–∞–∑–∫–∏

üí° –°–æ—Å—Ç–æ—è–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç CSS, –Ω–µ —Ç—Ä–µ–±—É—è –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∏ DOM.
üí° –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø–æ–¥–¥–µ—Ä–∂–∫—É —á–µ—Ä–µ–∑ `CSS.supports('selector(:state(checked))')`.
üí° –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ [`:state()`](/css/state/) –≤ CSS –¥–ª—è —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏.
üí° –î–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏–π —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –±—É–ª–µ–≤—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π, –≥–¥–µ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ –∞–∫—Ç–∏–≤–Ω–æ.
