---
title: "`Array.from()`"
description: "Функция создаёт новый массив на основе итерируемого или массивоподобного объекта."
authors:
  - nlopin
editors:
  - tachisis
related:
  - js/arrays
  - js/set
  - js/htmlcollection-and-nodelist
tags:
  - doka
---

## Кратко

Функция `Array.from()` создаёт новый массив на основе переданного объекта. Объект должен быть либо массивоподобным (как строка или объект `arguments`), либо итерируемым (как [`Set`](/js/set/) или [`Map`](/js/map/)).

## Как пишется

Функция `Array.from()` принимает три аргумента, последние два из которых не обязательны:

- Объект, на основе которого создаётся массив.
- Функция преобразования элемента перед его добавлением в массив. Работает как метод [`map()`](/js/array-map/).
- Значение, которое будет использоваться как [`this`](/js/function-context/) в функции из второго параметра.

Возвращает новый массив, составленный из элементов переданного объекта.

## Пример

### Массив из строки

```js
const arr = Array.from('дока')

console.log(arr)
// ['д', 'о', 'к', 'а']
```

### Массив из `Set`

```js
const uniqueNumbers = new Set()
uniqueNumbers.add(1)
uniqueNumbers.add(2)
uniqueNumbers.add(3)

const arr = Array.from(uniqueNumbers)
// [1, 2, 3]
```

### Массив из [NodeList](/js/htmlcollection-and-nodelist/)

Получить URL из всех ссылок на странице:

```js
const linkElements = document.getElementsByTagName('a')

const arrLinks = Array.from(linkElements, function(a) { return a.href })
```

## Как понять

В JavaScript и браузерных API есть много объектов, которые очень похожи на массив, но не являются им. Объекты могут выглядеть как массив, но не иметь всех методов массива: [`forEach()`](/js/array-foreach/), [`map()`](/js/array-map/), [`filter()`](/js/array-filter/) и так далее.

Такие объекты приходится превращать в массивы для удобства работы с ними или для интеграции с библиотеками. `Array.from()` создан, чтобы решить проблему конвертации таких объектов в новый массив.

`Array.from()` работает не со всеми объектами. Объект должен обладать одним из двух свойств, чтобы его получилось превратить в массив:

- Элементы объекта проиндексированы и объект имеет свойство `length`. Такие объекты называют _массивоподобными_, потому что именно эти свойства присущи массиву. Этим свойством обладают объекты `arguments`, [`NodeList`](/js/htmlcollection-and-nodelist/), [`HTMLCollection`](/js/htmlcollection-and-nodelist/).
- Объект итерируемый, то есть реализует интерфейс `Iterable`. Этим свойством обладают объекты `Set` и `Map`.

`Array.from()` перебирает каждый элемент и добавляет его в новый массив. Если передан второй аргумент, то перед добавлением происходит преобразование элемента.

<aside>

☝️ При создании массива происходит [поверхностное копирование (shallow copy) элементов](/js/shallow-or-deep-clone/). Если объект, на основе которого создаётся массив, содержит вложенные структуры данных внутри итерируемых элементов, то эти вложенные структуры будут [скопированны по ссылке](/js/ref-type-vs-value-type/#ssylochnye-tipy-dannyh). При их последующем изменении в объекте, изменения будут видны в полученном массиве и наоборот.

Например:
```js
// создадим объекты книг
const bookObj1 = {
  name: 'Война и мир',
  author: 'Л. Н. Толстой',
  filmYears: [1913, 1915, 1956]
}
const bookObj2 = {
  name: 'Братья Карамазовы',
  author: 'Ф. М. Достоевский',
  filmYears: [1915, 1920, 1931, 1969]
}

const bookSet = new Set() // создадим Set и добавим в него книги
bookSet.add(bookObj1)
bookSet.add(bookObj2)

const bookArray = Array.from(bookSet) // получим массив из Set

// добавим экранизацию 'Войны и мира' в исходный объект
bookObj1.filmYears.push(1965)

// это изменение отразится и на массиве
console.log(bookArray[0])
// const bookObj1 = {
//  name: 'Война и мир',
//  author: 'Л. Н. Толстой',
//  filmYears: [1913, 1915, 1956, 1965]
// }
```


</aside>
