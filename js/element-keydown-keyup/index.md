---
title: "События `keydown` и `keyup`"
authors:
  - stegur
contributors:
  - nlopin
  - skorobaeus
  - vitalybaev
keywords:
  - события
  - клавиатура
tags:
  - doka
---

Эта статья связана с обработкой событий в JavaScript. Зачем нужны события и как с ними работать читайте в статье [События](/js/events/).

## Кратко

[События](/js/events/) на HTML-элементе. Когда пользователь нажимает на клавишу клавиатуры, происходит событие `keydown`, как только пользователь отпустил клавишу — произойдёт событие `keyup`.

<video controls width="580" poster="images/poster.png">
  <source src="video/1.mp4" type="video/mp4">
</video>

Событие `keydown` фиксирует момент нажатия клавиши, до того как эта клавиша будет отпущена, что, по сути, является первой фазой нажатия. Продолжением является событие `keyup` — момент, когда клавиша будет отпущена.

## Как пишется

### keydown

```js
const spy = document.getElementById("keyboardSpy")

spy.addEventListener("keydown", function (event) {
  alert("Нажата клавиша " + event.key)
})
```

### keyup

```js
const spy = document.getElementById("keyboardSpy")

spy.addEventListener("keyup", function (event) {
  alert("Клавиша " + event.key + " отпущена")
})
```

## Как понять

В функцию-обработчик также передаётся объект события, в котором есть информация о нажатой кнопке:

- `key` — символьное значение. *`s`, `Я` , `U`* и т.д.
- `code` — название клавиши. `KeyS`, `KeyZ`, `KeyU` и т.д.
- `altKey` — `true` или `false`, была ли одновременно нажата/отпущена клавиша <kbd>Alt</kbd>
- `ctrlKey` — `true` или `false`, была ли одновременно нажата/отпущена клавиша <kbd>Ctrl</kbd>
- `shiftKey` — `true` или `false`, была ли одновременно нажата/отпущена клавиша <kbd>Shift</kbd>
- `metaKey` — `true` или `false`, была ли одновременно нажата/отпущена так называемая мета-клавиша (на Mac клавиатурах это <kbd>⌘ Command</kbd>, а в Windows клавиатурах — Windows key <kbd>⊞</kbd>)
- ~~`keyCode`~~ — код нажатой клавиши. `83`*,* `90`*,* `85` и т.д.

<aside>

⚠ ️Свойство `keyCode` [является устаревшим](https://w3c.github.io/uievents/#dom-keyboardevent-keycode)! Избегайте его использования, поскольку его поддержка может быть прекращена браузерами в будущем.

</aside>

`key` возвращает символьное представление клавиши. Другими словами, если эта клавиша печатает какой-то символ, то `key` будет содержать его. В случае, если нажата управляющая клавиша (Shift, Ctrl и т.д.), `key` вернёт название этой клавиши.

`code` же возвращает название клавиши в контексте её физического положения на клавиатуре. Например, если взять стандартную русско-английскую QWERTY клавиатуру и нажать в русской раскладке `q/й`, `key` будет `q`, а `code` — `KeyQ`. Если переключить раскладку на английский и нажать ту же клавишу, то `key` поменяется на `й`, а вот `code` так и останется `KeyQ`. Также `code` даёт больше информации положении парных клавиш. Если нажать левый Shift, то `key` будет содержать просто `Shift`, зато `code` вернёт — `ShiftLeft`.

Благодаря этим свойствам, `code` удобно использовать, например для управления клавиатурой в играх, когда есть необходимость задать определённым клавишам нужные действия независимо от языка раскладки.

Если подытожить, то `key` говорит нам, _какой символ_ будет напечатан, а `code` — _название этой клавиши_ на клавиатуре независимо от текущего языка ввода.

### Пример Keydown

При нажатии на любую клавишу в демо ниже, будет срабатывать событие `keydown`, которое будет выводить подсказку о нажатых клавишах:

<iframe title="Подсказки о нажатой клавише при событии keydown — Element.Keydown/Keyup — Дока" src="demos/keydown/" height="440"></iframe>

### Пример Keyup

Следующее демо будет сохранять цвет до тех пор, пока не будет зафиксировано событие `keyup` на клавише <kbd>Shift</kbd>.

<iframe title="Событие keyup — Element.Keydown/Keyup — Дока" src="demos/keyup/" height="160"></iframe>

Событие `keydown` выполняется бесконечное множество раз, до тех пор, пока клавиша будет зажата. Событие `keyup` будет выполнено только один раз — в момент, когда пользователь отпустит клавишу
