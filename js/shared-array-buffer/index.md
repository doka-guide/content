---
title: "`SharedArrayBuffer`"
description: "Объект с бинарными данными фиксированной длины для разделяемой области памяти."
authors:
  - doka-dog
keywords:
  - typed array
  - indexed collection
  - javascript collection
related:
  - js/arrays
  - js/typed-array
  - js/data-view
tags:
  - doka
  - placeholder
---

## Кратко

Объект, который содержит буфер фиксированной длины с бинарными данными. Используется для доступа к разделяемой памяти и не может быть откреплён от неё, в отличие от [`ArrayBuffer`](/js/array-buffer/). Является частью типизированного массива [`TypedArray`](/js/typed-array/).

Типизированные массивы упрощают работу с тяжёлыми данными, например, видео, аудио и анимациями. Их часто используют с различными API — WebGL, Canvas 2D, XMLHttpRequest2 и так далее.

## Пример

```js
const sab = new SharedArrayBuffer(1024)
worker.postMessage(sab)
```

## Как пишется

Всегда используйте оператор `new` для создания `SharedArrayBuffer`. В скобках указывают размер буфера в байтах. В качестве второго значения можно указать дополнительные свойства. Например, максимальный размер, до которого может увеличиться `SharedArrayBuffer`.

```js
const buffer = new SharedArrayBuffer(8, { maxByteLength: 16 })

buffer.grow(12)
```

Так как `SharedArrayBuffer` может работать сразу с несколькими тредами в памяти, его используют для Service Worker. В этом случае `SharedArrayBuffer` используют вместе с методом `postMessage()`и алгоритмами структурированного клонирования.

Из-за рисков, связанных с информационной безопасностью, к `SharedArrayBuffer` не всегда стоит предоставлять глобальный доступ. Чтобы максимально обезопасить данные на сайте или в приложении, не забывайте про CORS (Cross-origin Resource Sharing, совместное использование ресурсов между разными источниками).

### Свойства

- `byteLength` — размер буфера в байтах.
- `constructor` — создаёт экземпляр объекта.
- `growable` — увеличивается или нет длина буфера. Возвращает `true` или `false`.
- `maxByteLength` — максимальный размер, до которого может увеличиться `SharedArrayBuffer`.

### Методы

- `.grow()` — расширяет размеры объекта `SharedArrayBuffer` в байтах до установленного значения.
- `.slice()` — возвращает копию `SharedArrayBuffer` с таким же количеством байтов, как оригинальный объект.

## Как понять

Буфер — пространство в памяти, где хранятся бинарные данные. _Разделяемая память (shared memory)_ означает, что для чтения и записи информации из буфера обращаются не к ядру, а к отдельным сегментам памяти. Про память подробнее узнаете из статьи «[Как устроена память](/tools/trivial-memory-model/)».
