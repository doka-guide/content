---
title: "`async/await`"
description: "–ñ–¥–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞ —Å—Ç–∞–ª–æ –ª–µ–≥—á–µ! –ë–æ–ª—å—à–µ –Ω–∏–∫–∞–∫–∏—Ö –∫–æ–ª–±—ç–∫–æ–≤ –∏ –ø—Ä–æ–º–∏—Å–æ–≤, —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞."
authors:
  - nlopin
contributors:
  - vitya-ne
keywords:
  - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –≤—ã–∑–æ–≤
  - api
related:
  - js/async-in-js
  - js/promise
  - js/fetch
tags:
  - doka
---

–≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–≤—è–∑–∞–Ω–∞ —Å –ø–æ–Ω—è—Ç–∏–µ–º –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç–∏ –≤ JavaScript. –ó–∞—á–µ–º –Ω—É–∂–µ–Ω –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–¥ –∏ –∫–∞–∫ –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –¥–µ—Ç–∞–ª—è—Ö –æ–ø–∏—Å–∞–Ω–æ –≤ –æ–±–∑–æ—Ä–Ω–æ–π —Å—Ç–∞—Ç—å–µ ¬´[–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å –≤ JavaScript](/js/async-in-js/)¬ª.

## –ö—Ä–∞—Ç–∫–æ

–î–æ–±–∞–≤–ª–µ–Ω–Ω–æ–µ –ø–µ—Ä–µ–¥ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ `async` –¥–µ–ª–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π. –í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–∞–∫–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –≤ [Promise](/js/promise/):

```js
async function getStarWarsMovies() {
  return 1
}

console.log(getStarWarsMovies())
// Promise { <state>: "fulfilled", <value>: 1 }
```

–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω—É–∂–Ω—ã –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π: —Ä–∞–±–æ—Ç–æ–π —Å API, –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö, —á—Ç–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –∏ —Ç. –¥.

–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –Ω–µ —Å—Ä–∞–∑—É: –∫–æ–¥ –æ—Ç–ø—Ä–∞–≤–∏–ª –∑–∞–ø—Ä–æ—Å –∫ API –∏ –∂–¥—ë—Ç, –ø–æ–∫–∞ —Å–µ—Ä–≤–µ—Ä –ø—Ä–∏—à–ª—ë—Ç –æ—Ç–≤–µ—Ç. –ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ `await` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, —á—Ç–æ–±—ã –¥–æ–∂–¥–∞—Ç—å—Å—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏:

```js
async function getStarWarsMovie(id) {
  const response = await fetch(`https://swapi.dev/api/films/${id}/`)
  console.log('–æ—Ç–≤–µ—Ç –ø–æ–ª—É—á–µ–Ω', response)
  // *1

  return response.json()
}

const movies = getStarWarsMovie(1).then((movie) => {
  console.log(movie.title)
  // *2
})

console.log('—Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–∏', movies)
// *3
```

–î–≤–∏–∂–æ–∫ JavaScript –ø—Ä–∏ —ç—Ç–æ–º –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –∏ –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –¥—Ä—É–≥–æ–π –∫–æ–¥. –ö–∞–∫ —Ç–æ–ª—å–∫–æ –æ—Ç–≤–µ—Ç –ø–æ–ª—É—á–µ–Ω, –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è.

–í—ã–≤–æ–¥ –Ω–∞ —ç–∫—Ä–∞–Ω –±—É–¥–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π:

```js
// –í—ã–∑–≤–∞–ª–∏ —Ñ—É–Ω–∫—Ü–∏—é, –æ–Ω–∞ –Ω–∞—á–∞–ª–∞ –≤—ã–ø–æ–ª–Ω—è—Ç—å
// –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –æ–ø–µ—Ä–∞—Ü–∏—é –∏ –≤–µ—Ä–Ω—É–ª–∞ –ø—Ä–æ–º–∏—Å (*3)
'—Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–∏' Promise

// –ü–æ–ª—É—á–∏–ª–∏ –æ—Ç–≤–µ—Ç API, –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º
// –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ (*1)
'–æ—Ç–≤–µ—Ç –ø–æ–ª—É—á–µ–Ω' Response

// –°—Ä–∞–±–æ—Ç–∞–ª –∫–æ–ª–±—ç–∫ (*2)
'A New Hope'
```

## –ö–∞–∫ –ø–æ–Ω—è—Ç—å

–ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ `async/await` –Ω–µ –ø—Ä–∏–≤–Ω–æ—Å—è—Ç –≤ JavaScript —á—Ç–æ-—Ç–æ –Ω–æ–≤–æ–µ. –û–Ω–∏ —Ç–æ–ª—å–∫–æ —É–ø—Ä–æ—â–∞—é—Ç —Ä–∞–±–æ—Ç—É —Å –ø—Ä–æ–º–∏—Å–∞–º–∏.

–í–º–µ—Å—Ç–æ –∫–æ–¥–∞ —Å —Ü–µ–ø–æ—á–∫–æ–π –≤—ã–∑–æ–≤–æ–≤:

```js
function getMainActorProfileFromMovie(id) {
  return fetch(`https://swapi.dev/api/films/${id}/`)
    .then((movieResponse) => {
      return movieResponse.json()
    })
    .then((movie) => {
      const characterUrl = movie.characters[0].split('//')[1]
      return fetch(`https://${characterUrl}`)
    })
    .then((characterResponse) => {
      return characterResponse.json()
    })
    .catch((err) => {
      console.error('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞!', err)
    })
}

getMainActorProfileFromMovie(1).then((profile) => {
  console.log(profile)
})
```

–ú–æ–∂–Ω–æ –∑–∞–ø–∏—Å–∞—Ç—å —Å `async/await`:

```js
async function getMainActorProfileFromMovie(id) {
  try {
    const movieResponse = await fetch(`https://swapi.dev/api/films/${id}/`)
    const movie = await movieResponse.json()

    const characterUrl = movie.characters[0].split('//')[1]
    const characterResponse = await fetch(`https://${characterUrl}`)
    return characterResponse.json()
  } catch (err) {
    console.error('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞!', err)
  }
}

getMainActorProfileFromMovie(1).then(
  (profile) => {console.log(profile)}
)
```

–¢–∞–∫–æ–π –∫–æ–¥ –ø—Ä–æ—â–µ –ø–æ–Ω–∏–º–∞—Ç—å:

- –æ–Ω –ø–ª–æ—Å–∫–∏–π;
- –≤—ã–≥–ª—è–¥–∏—Ç, –∫–∞–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π;
- –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –±–ª–æ–∫ `try...catch` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫.

‚òùÔ∏è –ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ `await` –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –Ω–µ —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π, –Ω–æ –∏ –≤ [–º–æ–¥—É–ª—è—Ö](/js/modules/).

<details>
  <summary>
    –ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ–± –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `await` –≤ –º–æ–¥—É–ª—è—Ö (Top level await)
  </summary>

  –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ –¥–æ—á–µ—Ä–Ω–µ–º –º–æ–¥—É–ª–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `await` –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–º—É –º–æ–¥—É–ª—é –æ–∂–∏–¥–∞—Ç—å –æ–∫–æ–Ω—á–∞–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –ø—Ä–∏ —ç—Ç–æ–º –∑–∞–≥—Ä—É–∑–∫–∞ –¥—Ä—É–≥–∏—Ö –¥–æ—á–µ—Ä–Ω–∏—Ö –º–æ–¥—É–ª–µ–π –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è.

  –î–æ–ø—É—Å—Ç–∏–º, —É –Ω–∞—Å –µ—Å—Ç—å –º–æ–¥—É–ª—å `Parent.mjs`, –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—â–∏–π –¥–∞–Ω–Ω—ã–µ –∏–∑ –º–æ–¥—É–ª–µ–π `Child.mjs`:

  ```js
  // Parent.mjs
  import {data} from './Child.mjs'

  console.log('Parent:', data)
  ```

  –ú–æ–¥—É–ª—å `Child.mjs` —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ, –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ:

  ```js
  // Child.mjs

  // –ü—Ä–∏–º–µ—Ä –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–µ–π Promise
  const promise =
    fetch('https://dummyjson.com/products/1')
    .then(res => res.json())

  export const data = await promise
  ```

  –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ `Parent.mjs` –±—É–¥–µ—Ç –æ–∂–∏–¥–∞—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏.

</details>

üí° –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `await` –≤–Ω–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –≤ –º–æ–¥—É–ª—è—Ö –ø–æ—è–≤–∏–ª–∞—Å—å –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–µ ES2022.

–ü–æ–ø—ã—Ç–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `await` –≤–Ω–µ –º–æ–¥—É–ª—è –∏ –Ω–µ –≤ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–∏–≤–µ–¥—ë—Ç –∫ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–æ–π –æ—à–∏–±–∫–µ:
`SyntaxError: await is only valid in async functions and the top level bodies of modules`.

```js
function getMainActorProfileFromMovie(id) {
  // –ö–æ–¥ –∏–∑ –ø—Ä–∏–º–µ—Ä–∞ –≤—ã—à–µ
}

await getMainActorProfileFromMovie(1)
```
