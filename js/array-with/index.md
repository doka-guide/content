---
title: "`.with()`"
description: ""
authors:
  - vitya-ne
related:
  - js/arrays
  - js/ref-type-vs-value-type
tags:
  - doka
---

## Кратко

Метод `with()` возвращает новый массив, позволяя изменять значение одного из элементов, без изменения исходного массива.

## Пример

Получаем новый массив, изменяя элемент 'white' на 'blue':

```js
const colors = ['red', 'green', 'white']

const newColors = colors.with(2, 'blue')

console.log(newColors)
// ['red','green','blue']
console.log(colors)
// ['red','green','white']
```

Получаем новый массив, используя отрицательный индекс для изменения элемента 'white':
```js
const colors = ['red', 'green', 'white']

const newColors = colors.with(-1, 'blue')

console.log(newColors)
// ['red','green','blue']
console.log(colors)
// ['red','green','white']
```

## Как пишется

`Array.with()` принимает два обязательных аргумента:
- индекс элемента, который нужно изменить;
- новое значение изменяемого элемента.

Индекс элемента может быть:
- положительный - для доступа к элементам от начала массива;
- отрицательный - для доступа к элементам с конца массива. Например: `-1` - индекс последнего элемента, `-2` - предпоследнего.

`Array.with()` возвращает массив, с изменённым элементом.

## Как понять

При работе с массивами иногда требуется получить новый массив, содержащий измененную копию исходного массива.

Например,

Использование метода `with()` это удобный способ избежать изменения (мутации) исходного массива.
Подробнее об этом можно почитать в разделе [Хранение по ссылке и по значению](https://doka.guide/js/ref-type-vs-value-type/#mutacii-i-neizmenyaemost).




