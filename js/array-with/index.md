---
title: "`.with()`"
description: ""
authors:
  - vitya-ne
related:
  - js/arrays
  - js/ref-type-vs-value-type
tags:
  - doka
---

## Кратко

Метод `with()` возвращает новый массив, позволяя изменять значение одного из элементов, без изменения исходного массива.

## Пример

Получаем новый массив, изменяя элемент по индексу 2:

```js
const colors = ['red', 'green', 'white']

const newColors = colors.with(2, 'blue')

console.log(newColors)
// ['red','green','blue']
console.log(colors)
// ['red','green','white']
```

Получаем такой же новый массив, используя отрицательный индекс:
```js
const colors = ['red', 'green', 'white']

const oneMoreNewColors = colors.with(-1, 'blue')

console.log(oneMoreNewColors)
// ['red','green','blue']
console.log(colors)
// ['red','green','white']
```

## Как пишется

`Array.with()` принимает два обязательный аргумента: индекс элемента, который нужно изменить и новое значение для этого элемента.

Индекс элемента может быть:
- положительный - для доступа к элементам от начала массива;
- отрицательный - для доступа к элементам с конца массива. `-1` - индекс последнего элемента, `-2` - предпоследнего.

Возвращает новый массив, с изменённым элементом.

## Как понять

При работе с массивами иногда требуется получить новый массив, содержащий измененную копию исходного массива.

Например,

Использование метода `with()` это удобный способ избежать изменения (мутации) исходного массива.
Подробнее об этом можно почитать в разделе [Хранение по ссылке и по значению](https://doka.guide/js/ref-type-vs-value-type/#mutacii-i-neizmenyaemost).




