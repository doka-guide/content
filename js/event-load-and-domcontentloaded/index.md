---
title: "`load` и `DOMContentLoaded`"
authors:
  - nlopin
contributors:
  - furtivite
  - skorobaeus
tags:
  - doka
---

## Кратко

Если нужно запустить JavaScript-код после того, как страница загрузилась, то нужно [подписаться на одно из событий](/js/events/) у объекта `window`:

- `DOMContentLoaded` — событие происходит, когда браузер разобрал HTML-страницу и составил [DOM-дерево](/js/dom/);
- `load` — событие происходит, когда загрузилась и HTML страница, и все ресурсы для её отображения пользователю: стили, картинки и так далее.

`DOMContentLoaded` всегда происходит раньше, чем `load`. Чем больше стилей и картинок на странице, тем больше разница во времени между срабатыванием этих событий.

## Как пишется

```js
window.addEventListener("load", function () {
  console.log("load!")
})

// это событие можно обрабатывать так же и на document
window.addEventListener("DOMContentLoaded", function () {
  console.log("dom loaded!")
})
```

## Как понять

Для того, чтобы показать пользователю страницу, браузер делает следующие шаги:

1. Запрашивает HTML-страницу с сервера;
2. Обрабатывает полученный HTML и создаёт [DOM](/js/dom/) для взаимодействия между JavaScript и HTML (☝️ в конце этого этапа происходит событие `DOMContentLoaded`);
3. Запрашивает у сервера дополнительные файлы, встретившиеся при разборе HTML: картинки, шрифты, CSS- и JS-файлы;
4. Получив все данные, отображает страницу пользователю (☝️ тут происходит событие `load`).

Событие `DOMContentLoaded` гарантирует, что DOM готов. Можешь искать узлы по нему и не бояться, что что-то не догрузилось.

Событие `load` дополнительно гарантирует, что все стили и картинки готовы. В этот момент размеры элементов на страницы посчитаны верно и доступны. `DOMContentLoaded` таких гарантий не даёт.

<iframe title="Разница между событиями load и DOMContentloaded" src="demos/overloaded/" height="530"></iframe>
