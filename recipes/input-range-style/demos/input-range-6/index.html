<!DOCTYPE html>
<html lang="ru">
  <head>
    <title>Слайдер input range 3</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&display=swap"
    >
    <style>
      *, 
      *::before, 
      *::after {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      html {
        color-scheme: dark;
      }

      body {
        min-height: 100vh;
        padding: 50px;
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: #18191C;
        color: #FFFFFF;
        font-family: "Roboto", sans-serif;
      }

      @media (max-width: 768px) {
        body {
          padding: 30px;
        }
      }

      .range {
        --range-w: 100%;
        --range-h: 30px;

        --range-input-write-m: horizontal-tb;
        --range-label-rotate: 0;

        --range-track-w: 100%;
        --range-track-h: 8px;
        --range-track-top: 75px;
        --range-track-bottom: 0px;
        --range-track-left: 0;

        --range-thumb-w: 30px;
        --range-thumb-h: 30px;

        --range-progress-w: calc(var(--value) * 1%);
        --range-progress-h: 8px;
        --range-progress-top: 75px;
        --range-progress-bottom: 0px;
        --range-progress-left: 0;
        --range-progress-right: none;

        --range-output-top: 70px;
        --range-output-left: calc(var(--value) * 1%);
        --range-output-offset-xy: calc(var(--value) * -1%), 0;

        --tickmarks-w: calc(100% - 18px);
        --tickmarks-h: 30px;
        --tickmarks-dir: row;
        --tickmarks-write-mode: horizontal-tb;

        --option-after-w: 3px;
        --option-after-h: 35px;
        --option-after-top: -37px;
        --option-after-left: 10px;

        writing-mode: horizontal-tb;

        position: relative;
        display: grid;
      }

      .range:has(input[aria-orientation="horizontal"][dir="rtl"]) {
        --range-output-left: calc(var(--value) * -1% + 90%);
        --range-output-offset-xy: calc(var(--value) * 1%), 0;
        --tickmarks-dir: row-reverse;
        --range-progress-left: none;
        --range-progress-right: 0;
      }

      /* Вариант сверху вниз (100 внизу, 0 вверху) */
      .range:has(input[aria-orientation="vertical"][dir="ltr"]) {
        --range-w: 30px;
        --range-h: 100%;

        --range-input-write-m: vertical-lr;
        --range-label-rotate: 180deg;

        --range-track-w: 8px;
        --range-track-h: 100%;
        --range-track-top: 0;
        --range-track-bottom: none;
        --range-track-left: 75px;

        --range-progress-w: 8px;
        --range-progress-h: calc(var(--value) * 1%);
        --range-progress-top: 0;
        --range-progress-bottom: none;
        --range-progress-left: 75px;

        --range-output-top: calc(var(--value) * -1% + 90%);
        --range-output-left: 28px;
        --range-output-offset-xy: 0, calc(var(--value) * -1%);

        --tickmarks-w: 30px;
        --tickmarks-h: calc(100% - 5px);
        --tickmarks-dir: column;
        --tickmarks-write-mode: horizontal-tb;

        --option-after-w: 35px;
        --option-after-h: 3px;
        --option-after-top: 15px;
        --option-after-left: -37px;

          writing-mode: vertical-lr;
      }

      /* Вариант снизу вверх (0 внизу, 100 вверху) */
      .range:has(input[aria-orientation="vertical"][dir="rtl"]) {
        --range-w: 30px;
        --range-h: 100%;

        --range-input-write-m: vertical-lr;
        --range-label-rotate: 180deg;

        --range-track-w: 8px;
        --range-track-h: 100%;
        --range-track-top: none;
        --range-track-bottom: 0;
        --range-track-left: 75px;

        --range-progress-w: 8px;
        --range-progress-h: calc(var(--value) * 1%);
        --range-progress-top: none;
        --range-progress-bottom: 0;
        --range-progress-left: 75px;

        --range-output-top: calc(var(--value) * 1%);
        --range-output-left: 28px;
        --range-output-offset-xy: 0, calc(var(--value) * 1%);

        --tickmarks-w: 30px;
        --tickmarks-h: calc(100% - 5px);
        --tickmarks-dir: column-reverse;
        --tickmarks-write-mode: horizontal-tb;

        --option-after-w: 35px;
        --option-after-h: 3px;
        --option-after-top: 15px;
        --option-after-left: -37px;

          writing-mode: vertical-lr;
      }

      .range-label {
        margin-block-end: 41px;
        transform: rotate(var(--range-label-rotate));
      }

      .range-input {
        width: var(--range-w);
        height: var(--range-h);
        appearance: none;
        background: none;
        writing-mode: inherit;
      }

      .range-input::-webkit-slider-thumb,
      .range-input::-moz-range-thumb {
        width: var(--range-thumb-w);
        height: var(--range-thumb-h);
        border: none;
        border-radius: 50%;
        background-color: white;
        box-shadow: 0 0 0 5px inset #C56FFF;
        transition: 300ms;
      }

      .range-input:hover::-webkit-slider-thumb,
      .range-input:hover::-moz-range-thumb,
      .range-input:focus-visible::-webkit-slider-thumb,
      .range-input:focus-visible::-moz-range-thumb {
        box-shadow: 0 0 0 10px inset #C56FFF;
        transition: 300ms;

        + .range-output {
          background-color: #C56FFF;
        }
      }

      .range-input:focus-visible::-webkit-slider-thumb,
      .range-input:focus-visible::-moz-range-thumb {
        outline: 3px solid #41E847;
      }

      .range-input:active::-webkit-slider-thumb,
      .range-input:active::-moz-range-thumb {
        box-shadow: 0 0 0 30px inset #C56FFF;
        transition: 300ms;
      }

      .range-input:disabled::-webkit-slider-thumb,
      .range-input:disabled::-moz-range-thumb {
        box-shadow: 0 0 0 30px inset gray;
      }

      .track {
        position: absolute;
        top: var(--range-track-top);
        bottom: var(--range-track-bottom);
        left: var(--range-track-left);
        width: var(--range-track-w);
        height: var(--range-track-h);
        border-radius: 10px;
        background-color: #ababab;
        z-index: -1;
      }

      .progress {
        position: absolute;
        top: var(--range-progress-top);
        bottom: var(--range-progress-bottom);
        left: var(--range-progress-left);
        right: var(--range-progress-right);
        width: var(--range-progress-w);
        height: var(--range-progress-h);
        border-radius: 10px;
        background-color: #C56FFF;
        z-index: -1;
      }

      .range-output {
        position: absolute;
        bottom: var(--range-output-top);
        left: var(--range-output-left);
        padding: 0 4px;
        background: transparent;
        border-radius: 10px;
        font-size: 18px;
        text-align: end;
        transform: translate(var(--range-output-offset-xy));
        user-select: none;
        transition: 300ms;
        writing-mode: horizontal-tb;
      }

      .range-input:hover + .range-output,
      .range-input:focus-visible + .range-output {
        background-color: #C56FFF;
        transition: 0ms;
      }

      #tickmarks {
        width: var(--tickmarks-w);
        height: var(--tickmarks-h);
        padding-inline: 4px 0;
        display: flex;
        flex-direction: var(--tickmarks-dir);
        justify-content: space-between;
        color: white;
        writing-mode: var(--tickmarks-write-mode);
      }

      option {
        position: relative;
        padding-top: 10px;
        padding-left: 4px;
        width: 10px;
        font-size: 14px;
      }

      option:after {
        content: "";
        display: initial;
        position: absolute;
        top: var(--option-after-top);
        left: var(--option-after-left);
        width: var(--option-after-w);
        height: var(--option-after-h);
        margin: 0 auto;
        background: #c6c6c6;
        z-index: -1;
      }

    </style>
  </head>
  <body>
    <div class="range" style="--value: 80;">
      <label class="range-label" for="tailmetr">Хвост-о-метр (cм)</label>
      <div class="track"></div>
      <div class="progress"></div>
      <input
        class="range-input"
        id="tailmetr"
        type="range"
        min="0"
        max="100"
        value="80"
        step="1"
        dir="rtl"
        aria-valuemin="0"
        aria-valuemax="100"
        aria-orientation="vertical"
        oninput="handleInputRange()"
        list="tickmarks"
      >
      <output class="range-output" id="output" for="tailmetr">80</output>
      <datalist id="tickmarks">
        <option value="0 to 20">0</option>
        <option>20</option>
        <option>40</option>
        <option>60</option>
        <option>80</option>
        <option>100</option>
      </datalist>
    </div>
  </body>
</html>
