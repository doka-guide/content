<h2>Мониторинг пакетов</h2>
<p>Существуют специальные утилиты, которые позволяют просматривать пакеты в сетевом трафике, что позволяет разобраться с работой того или иного сетевого устройства. В Linux и большинстве Unix-подобных систем есть консольная утилита <em>tcpdump</em>, есть и кросс-платформенная утилита Wireshark с графическим интерфейсом. Эти две утилиты в основном и используются для мониторинга пакетов.</p>
<h3>Wireshark</h3>
<p>Утилиту Wireshark можно <a href="https://www.wireshark.org/#download">скачать</a> и установить с официального сайта. Она опенсорсная и имеет графический интерфейс, который состоит из трёх частей (сверху вниз):</p>
<ul>
<li>список пакетов, пересылаемых по сети;</li>
<li>пакет, представленный в текстовом виде;</li>
<li>пакет, представленный в бинарном виде.</li>
</ul>
<p><img src="images/1.png" alt="Рабочее окно утилиты Wireshark"></p>
<p>Вы можете получить подробную информацию о каждом пакете, нужно лишь выбрать его из списка. Пакеты можно фильтровать по различным признакам. Существуют фильтры захвата и показа. Первый тип фильтров используется для захвата пакетов в реальном времени, сбора информации и статистики по ним. Фильтры показа (дисплейные фильтры) позволяют оперировать с уже захваченными пакетами. Захват пакетов с выбранного сетевого интерфейса осуществляется с момента нажатия кнопки «Начать захват пакетов» (Start capturing packets) и до нажатия кнопки «Остановить захват пакетов» (Stop capturing packets). Захват пакетов — это сбор информации о пакетах.</p>
<p>В Wireshark есть предустановленные фильтры, но можно формировать и собственные с помощью мастера или вручную в строке фильтрации в самом верху окна. Утилита Wireshark поможет веб-разработчику детально разобраться с пакетами, которые отправляются серверу или приходят от сервера. Если <a href="/tools/web-server/">веб-сервер</a> установлен на компьютере с Wireshark, можно посмотреть, как пользователи работают с сайтом.</p>
<p>Мониторинг пакетов также может помочь выявить аномальный трафик и проанализировать безопасность компьютера с точки зрения его работы с сетью. Данные можно сохранять в текстовый файл для последующего анализа в Wireshark или любым другим способом.</p>
<h3>Tcpdump</h3>
<p>Если графический интерфейс не доступен, например, вы настраиваете удалённый сервер, можно использовать <em>tcpdump</em>. Чтобы просмотреть трафик, надо набрать команду:</p>
<pre><code class="language-bash">tcpdump
</code></pre>
<p>Не забывайте, что на некоторых операционных системах, утилиту необходимо запускать от имени администратора.</p>
<p>Пока вы не прервёте работу утилиты сигналом <code>SIGINT</code>, нажав сочетание клавиш <kbd>Ctrl C</kbd>, в терминал будет выводиться информация о пакетах. Прочитайте статью <a href="/tools/process-management/">«Управление процессами»</a>, чтобы узнать больше о сигналах. Как работать с терминалом описано в статье «<a href="/tools/cli/">Интерфейс командной строки</a>».</p>
<p>Пакеты можно фильтровать. Например, чтобы вывести пакеты, которые приходят на 80-й порт по протоколам транспортного уровня TCP или UDP, нужно выполнить команду:</p>
<pre><code class="language-bash">tcpdump udp port 80 or tcp port 80
</code></pre>
<p>Информацию можно выводить в файл, а не в терминал. Для этого нужно указать соответствующий ключ:</p>
<pre><code class="language-bash">tcpdump -w out.pcap
</code></pre>
<p>Чтобы прочитать этот файл, можно использовать Wireshark, который поддерживает данные в формате PCAP, или тот же <em>tcpdump</em>:</p>
<pre><code class="language-bash">tcpdump -r out.pcap
</code></pre>
