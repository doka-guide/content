<h2>Имена файлов и пути</h2>
<p>Путь является неотъемлемой частью имени файла. Абсолютным (полным) именем файла называется путь от корневой директории, относительным — путь от текущей (рабочей) директории. В одной директории не может быть файлов с одинаковым именем.</p>
<p>Относительное имя файла удобно использовать. Можно поместить нужные какой-то программе или проекту файлы в одну директорию, можно использовать структуру поддиректорий для удобства организации и использования дискового пространства. При переносе всей директории на другой носитель или компьютер, проект останется в рабочем состоянии. Относительные пути, как правило, практически не зависят от операционной системы и конкретного компьютера, если вы работаете внутри какой-то директории. Но надо помнить, что относительное имя файла всегда преобразуется в абсолютное при обращении в нему.</p>
<p>В зависимости от операционной системы и файловой системы именование файла обладает рядом особенностей.</p>
<h3>Браузер и имена файлов в Интернете</h3>
<p>Абсолютное имя может включать в себя ряд параметров:</p>
<ul>
<li>протокол или способ доступа (<code>https</code>, <code>ftp</code>, <code>file</code> и др.);</li>
<li>имя или адрес компьютера, узла сети (<code>wikipedia.org</code>, <code>192.168.0.1</code>, <code>\\MYCOMPUTER</code>, <code>SYS:</code> и др.);</li>
<li>устройство хранения, диск (<code>C:</code>, <code>/</code>, <code>SYSLIB</code> и др.);</li>
<li>путь к директории (<code>/usr/bin</code>, <code>\TEMP</code>, <code>[USR.LIB.SRC]</code> и др.);</li>
<li>собственно имя файла, которое может содержать его расширение (<code>.txt</code>, <code>.exe</code>, <code>.COM</code> и др.).</li>
</ul>
<p>В строке адреса мы всегда указываем путь к конкретному файлу, ничего более. В Интернете есть части абсолютного имени, которые подставляются по умолчанию. Если вы введёте в строку адреса браузера сайт <code>example.com</code>, браузер скорее всего сначала автоматически подставит протокол по умолчанию <code>https</code>. Окончание абсолютного имени файла в адресной строке браузера зависит от технологии, которая используется для отображения контента страницы. Если страницу полностью формирует сервер (рендеринг на стороне сервера), то при запросе он может вернуть значение, например, <code>index.html</code> для абсолютного пути. В браузере по умолчанию часто не показывается конечный файл, поэтому вы можете и не увидеть, что это <code>index.html</code>. Если рендеринг происходит на стороне клиента (в браузере), то адрес может быть сформирован динамически и не всегда имеет конечный файл. Это происходит из-за специального <a href="/js/api/">API</a> браузера — History API. В этом режиме адресная строка используется для отображения виртуального файла. По сути, запуская такое веб-приложение, вы как будто загружаете файл в оперативную память.</p>
<h3>Операционная система Windows</h3>
<p>Абсолютное имя файла включает в себя букву логического диска, после которой обязательно идёт двоеточие и обратная косая черта (back slash) <code>:\</code>. Затем через символ <code>\</code> перечисляются все поддиректории. В конце указывается имя файла. Чтобы указать путь с пробелами необходимо пользоваться кавычками. Например, скопировать файл можно так:</p>
<pre><code class="language-bash">copy &quot;c:\directory\my file name&quot; &quot;d:\another directory\my new file name&quot;
</code></pre>
<p>В именах каталогов и файлов в Windows сохраняется регистр строк, используемый в момент их создания. Но, например, при поиске файла или копировании регистр не будет иметь значения, поскольку в файловой системе Windows регистр букв по умолчанию не учитывается. Есть <a href="https://github.com/vandread666/GhacksFiles/blob/master/Kelly/dontprettypath.reg">способ</a> обойти это ограничение для некоторых версий Windows.</p>
<p>При проектировании работы веб-приложения необходимо учитывать переносимость — ваше приложение в идеале должно работать на большинстве операционных систем. Формировать имя файла нужно очень осторожно: в некоторых операционных системах используются файловые системы, в которых для имён файлов запрещены некоторые символы. Например, для Windows следующие символы запрещены:</p>
<ul>
<li><code>\</code> — разделитель подкаталогов;</li>
<li><code>/</code> — разделитель ключей командного интерпретатора;</li>
<li><code>:</code> — отделяет букву диска или имя альтернативного потока данных;</li>
<li><code>*</code> — заменяющий символ (маска «любое количество любых символов»);</li>
<li><code>?</code> — заменяющий символ (маска «один любой символ»);</li>
<li><code>&quot;</code> — используется для указания путей, содержащих пробелы;</li>
<li><code>&lt;</code> — перенаправление ввода;</li>
<li><code>&gt;</code> — перенаправление вывода;</li>
<li><code>|</code> — обозначает конвейер;</li>
<li><code>+</code> — конкатенация.</li>
</ul>
<p>В Windows есть ограничение на длину абсолютного имени файла, которая не может больше 260 символов. При этом первые три символа используются для буквы диска и служебного разделителя <code>:\</code>, а последний символ имеет значение <code>&lt;NUL&gt;</code>. Оставшиеся 256 символов используются непосредственно для имени. Начиная с Windows 10, ограничение <a href="https://docs.microsoft.com/ru-ru/windows/win32/fileio/maximum-file-path-limitation?tabs=cmd#enable-long-paths-in-windows-10-version-1607-and-later">было снято</a>, но всегда необходимо помнить о пользователях более ранних версий этой операционной системы.</p>
<h3>Unix-подобные операционные системы</h3>
<p>Абсолютное имя файла в Unix-подобных операционных системах всегда начинается со специального символа корневой директории <code>/</code> (slash), после которого перечисляются через этот же символ все поддиректории. Если путь начинается не с косой черты, то путь становится относительным. Однако существуют специальные последовательности символов, которые позволяют использовать относительные пути эффективно. Например, символ <code>.</code> используется для доступа к текущей директории, а <code>..</code> к директории, которая стоит на уровень выше. Чтобы перейти на два уровня вверх, можно использовать такую последовательность: <code>../../</code>. Символ <code>~</code> в начале относительного имени будет указывать на домашнюю директорию пользователя, которая обычно расположена в директории <code>/home/username</code>. Например, можно по-разному указать путь для домашней директории пользователя с именем <code>username</code>:</p>
<pre><code class="language-bash"># Абсолютный путь
/home/username

# Относительный путь из папки /tmp
../home/username

# Если вы работаете от имени пользователя username
~

# Эквивалент
~/../../home/username
</code></pre>
<p>В большинстве Unix-подобных операционных систем, имена файлов и директорий зависят от регистра букв. Например, файлы с именами <code>File1</code> и <code>file1</code> — это разные файлы. Если необходимо указать пробел в имени файла или директории, можно использовать кавычки или символ <code>\</code> перед пробелом. Например, следующие пути эквивалентны:</p>
<pre><code class="language-bash">'~/super project/script.sh'
&quot;~/super project/script.sh&quot;
~/super\ project/script.sh
</code></pre>
<p>В именах файлов UNIX-подобных операционных систем запрещён символ <code>/</code> и символ конца строки <code>\0</code>.</p>
<h3>Расширение имени файла</h3>
<p>Расширение имени файла часто используется для идентификации формата файла. Это нужно в основном для пользователя и простой фильтрации, сортировки или группировки имён файлов. Например, файл <code>image.png</code> является картинкой, <code>movie.avi</code> — видеофайлом, а файл <code>readme.txt</code> — текстовым документом. И мы можем это узнать, не просматривая атрибуты файла. Сам тип файла при этом задаётся в атрибутах файла, расширение имени файла — это лишь инструмент для быстрого (визуального) определения типа файла. Расширение файла помогает не только нам, но и менеджеру запуска приложений. Он может автоматически определить целевую программу, для которой предназначен тот или иной файл.</p>
<p>Есть и специализированные расширения. Например, файлы с расширениями <code>.com</code> и <code>.exe</code> в Windows являются исполняемыми файлами (программами), <code>.ini</code> — описанием конфигурации приложения, <code>.bat</code> — скриптом для терминала (набором команд, выполняемых последовательно), <code>.dll</code> — является динамической библиотекой и содержит функции, которые могут вызывать программы «на лету». В Unix-подобных системах <code>.sh</code> используется для скриптов в терминале, <code>.conf</code> — для конфигурации приложения, а исполняемые файлы (программы), как правило, не имеют расширения.</p>
<h2>Структура директорий в Linux</h2>
<p>Во многих Linux-системах можно встретить каталоги <code>/etc</code>, <code>/home</code>, <code>/usr/bin</code> и прочие. В конце января 2004 года был принят <a href="https://wiki.linuxfoundation.org/lsb/fhs">стандарт Filesystem Hierarchy Standard (FHS)</a>, согласно которому в корневой директории Linux-системы должны находиться поддиректории со стандартными именами. Более того, тип данных (файлов), которые могут находится в той или иной директории регламентирован. Стандарт определяет следующие директории в корневой директории для следующих задач:</p>
<table>
<thead>
<tr>
<th style="text-align:left">Директория</th>
<th style="text-align:left">Символ</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>/bin</code></td>
<td style="text-align:left">Файлы основных команд (утилит)</td>
</tr>
<tr>
<td style="text-align:left"><code>/boot</code></td>
<td style="text-align:left">Неизменяемые файлы, необходимые для загрузки системы</td>
</tr>
<tr>
<td style="text-align:left"><code>/dev</code></td>
<td style="text-align:left">Файлы устройств</td>
</tr>
<tr>
<td style="text-align:left"><code>/proc</code></td>
<td style="text-align:left">Системные файлы</td>
</tr>
<tr>
<td style="text-align:left"><code>/sys</code></td>
<td style="text-align:left">Подсистема диагностики и управления операционной системы (аналог <code>/proc</code>)</td>
</tr>
<tr>
<td style="text-align:left"><code>/etc</code></td>
<td style="text-align:left">Файлы конфигурации системы на данном компьютере</td>
</tr>
<tr>
<td style="text-align:left"><code>/home</code></td>
<td style="text-align:left">Домашние директории пользователей</td>
</tr>
<tr>
<td style="text-align:left"><code>/lib</code></td>
<td style="text-align:left">Основные разделяемые библиотеки и модули ядра</td>
</tr>
<tr>
<td style="text-align:left"><code>/lib&lt;alt&gt;</code></td>
<td style="text-align:left">Основные разделяемые библиотеки для альтернативных форматов исполняемых файлов</td>
</tr>
<tr>
<td style="text-align:left"><code>/mnt</code></td>
<td style="text-align:left">Точка монтирования для временно подключаемых файловых систем</td>
</tr>
<tr>
<td style="text-align:left"><code>/root</code></td>
<td style="text-align:left">Домашний каталог суперпользователя root</td>
</tr>
<tr>
<td style="text-align:left"><code>/opt</code></td>
<td style="text-align:left">Дополнительные пакеты программного обеспечения</td>
</tr>
<tr>
<td style="text-align:left"><code>/sbin</code></td>
<td style="text-align:left">Основные системные исполняемые файлы</td>
</tr>
<tr>
<td style="text-align:left"><code>/tmp</code></td>
<td style="text-align:left">Временные файлы</td>
</tr>
<tr>
<td style="text-align:left"><code>/usr</code></td>
<td style="text-align:left">Иерархия второго уровня</td>
</tr>
<tr>
<td style="text-align:left"><code>/var</code></td>
<td style="text-align:left">Переменные данные</td>
</tr>
</tbody>
</table>
<p>Если в операционной системе файлы размещены по стандарту, это позволяет предсказать поведение операционной системы. Плюсом является то, что при переходе от одной операционной системы на базе Linux к другой пользователю легко ориентироваться в подобной файловой структуре. Для программиста стандартное расположение файлов позволяет организовать автоматическое взаимодействие между разными компонентами системы.</p>
<p>Однако практически ни один из дистрибутивов Linux не следует стандарту полностью. И сам стандарт продолжает развиваться. Разработчики операционных системы из семейства Unix игнорируют данный стандарт в пользу поддержки собственных.</p>
