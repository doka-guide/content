<h2>Кратко</h2>
<p>Git CLI — это консольный интерфейс для Git, который выполняется в терминале. На своих компьютерах разработчики часто используют графические интерфейсы, чтобы работать с репозиторием более комфортно. Но уметь пользоваться Git CLI все равно важно. Например, на серверах зачастую нет графического интерфейса, и пользователи вынуждены использовать консольные приложения. Git CLI — это общий для всех разработчиков инструмент, он есть почти для каждой операционной системы компьютера.</p>
<p>При работе над проектом разработчики обычно следуют примерно одному и тому же сценарию — скачивают себе удалённый репозиторий, создают отдельную ветку для своих правок, изменяют код или пишут новый, добавляют изменённые файлы к списку отслеживаемых изменений, создают коммит и отправляют всю ветку обратно, чтобы другие программисты могли провести <a href="../code-review/">код-ревью</a>. После успешного код-ревью ветка разработчика сливается с основной веткой. На этом разработку по конкретной задаче можно считать законченной, а ветку разработчика можно удалить.</p>
<p><img src="images/high-level.png" alt="Схема работы с Гит"></p>
<h2>Как пользоваться</h2>
<h3>Скачивание удалённого репозитория</h3>
<p>Удалённый репозиторий — не самый удачный перевод на русский английского <code>remote repository</code>. Он значит, что репозиторий находится на удалении от вас — не на вашем компьютере, а не то, что ваш код уничтожен.</p>
<p>Обычно, при разработке программы есть сервер, где хранится оригинал исходного кода. Все разработчики копируют этот репозиторий на свой локальный компьютер. После разработки какой-то функциональности изменения отправляются обратно — из локального репозитория разработчика в удалённый.</p>
<p>В первый раз, чтобы скачать весь удалённый репозиторий на свой компьютер, его нужно <strong>клонировать</strong>. Команда <code>git clone</code> создаст полную копию локально, в которую можно будет вносить изменения.</p>
<pre><code class="language-bash">git clone git@remote_repo_address
</code></pre>
<p>Со временем, в удалённом репозитории могут появляться новые изменения, которые необходимо подтягивать в локальный репозиторий. Получить все изменения из удалённого репозитория можно командой:</p>
<pre><code class="language-bash">git pull --all
</code></pre>
<h3>Создание ветки</h3>
<p>При работе в команде, разработчики делают задачи параллельно. Чтобы в будущем возникло минимальное число конфликтов в исходном коде, используют ветки.</p>
<p>Конфликт — это ситуация, когда один и тот же код изменили два разных разработчика. В такой ситуации нельзя автоматически решить, чьи правки важнее, и приходится разбирать каждый случай вручную.</p>
<p>Новую ветку можно создать от текущей через Git CLI:</p>
<pre><code class="language-bash">git branch new-user-profile
</code></pre>
<p>Обычно после создания ветки, её сразу делают активной, для этого используется команда:</p>
<pre><code class="language-bash">git switch new-user-profile
</code></pre>
<p>Для удобства можно использовать параметр, с которым команда сразу создаст новую ветку и сделает её активной: <code>git switch -c new-user-profile</code></p>
<p>Новая ветка будет включать историю той ветки, от которой она отведена. При этом коммиты в родительской ветке, созданные после отведения дочерней, уже не попадут в историю дочерней. Точно так же и коммиты из дочерней ветки не попадут ни в какую другую, пока разработчик явным образом их туда не поместит.</p>
<p>Можно произвольно переключаться между ветками с помощью команды <code>git switch</code>.</p>
<pre><code class="language-bash">git switch main
git switch new-user-profile
</code></pre>
<aside>
<p>❗️ До версии Git 2.23 вместо <code>switch</code> использовалась <code>checkout</code>, но она предназначена и для многих других операций, потому разработчики выделили это действие в отдельную команду.</p>
</aside>
<p>Использование <code>checkout</code> похоже на <code>switch</code>.</p>
<p>Для создания и переключения на ветку:</p>
<pre><code class="language-bash">git branch new-user-profile
git checkout new-user-profile
</code></pre>
<p>Или сразу создать новую ветку и сделать её активной</p>
<pre><code class="language-bash">git checkout -b new-user-profile
</code></pre>
<p>Переключение между ветками происходит аналогично:</p>
<pre><code class="language-bash">git checkout main
git checkout new-user-profile
</code></pre>
<h3>Проверка текущего статуса репозитория</h3>
<p>Чтобы посмотреть, какие файлы были изменены, созданы или удалены, нужно проверить статус репозитория:</p>
<pre><code class="language-bash">git status
</code></pre>
<p>Эта команда помогает понять, что произошло в репозитории со времени последнего коммита, какие файлы отслеживаются, и решить, что делать дальше.</p>
<h3>Отслеживание изменений</h3>
<p>По умолчанию изменения в новых файлах не отслеживаются. Чтобы Git начал это делать, нужно добавить их к списку отслеживания. Для этого в Git CLI используется команда <code>git add</code>:</p>
<pre><code class="language-bash">git add filename.js
</code></pre>
<p>Использовать команду можно не только для отдельного файла, но и для целой директории с файлами. Например, чтобы добавить все файлы в текущей директории, можно сделать так:</p>
<pre><code class="language-bash">git add .
</code></pre>
<p>Если вы уверены, что хотите добавить все новые и изменившиеся файлы, то воспользуйтесь параметром <code>--all</code> для команды <code>git add --all</code>.</p>
<h3>Коммит</h3>
<p>Коммит — это фиксация того состояния вашего кода, которое вы хотите оставить в истории вашего проекта.</p>
<p>Всегда создавайте коммит после внесения изменений в код проекта и давайте ему осмысленный комментарий. В Git CLI для этого используется команда:</p>
<pre><code class="language-bash">git commit
</code></pre>
<p>Она создаст коммит, в который войдут все изменения, добавленные к отслеживанию. После вызова откроется текстовый редактор, куда следует ввести комментарий к коммиту.</p>
<p>Если комментарий к коммиту короткий, то его можно передавать через аргумент: <code>git commit -m &quot;Rename getUser function&quot;</code></p>
<h3>Отправка в удалённый репозиторий</h3>
<p>Чтобы отправить свои изменения в удалённый репозиторий, нужно сделать коммит в конкретной ветке и выполнить команду:</p>
<pre><code class="language-bash">git push
</code></pre>
<p>Если такой ветки ещё не существует в удалённом репозитории, Git CLI посоветует создать её и подскажет команду.</p>
<h3>Слияние изменений</h3>
<p>Часто случается так, что за время разработки какой-то функциональности в дочерней ветке, в родительскую ветку добавляется много новых коммитов, и хочется добавить их и в дочернюю ветку. Для этого нужно провести слияние родительской ветки в дочернюю.</p>
<p>С другой стороны, после окончания разработки функциональности в дочерней ветке, нужно отправить изменения в родительскую. Для этого тоже нужно провести слияния, но уже в обратную сторону — из дочерней ветки в родительскую.</p>
<p><img src="images/merge.png" alt="Слияние веток"></p>
<p>Чтобы слить любую ветку в текущую активную ветку, нужно выполнить следующую команду:</p>
<pre><code class="language-bash">git merge branch_name
</code></pre>
<h3>Удаление ветки</h3>
<p>После того, как изменения из ветки разработчика попали в основную ветку (<code>master</code> или <code>main</code>), ветку разработчика нужно удалить. Это можно сделать консольной командой:</p>
<pre><code class="language-bash">git branch -d branch_name
</code></pre>
