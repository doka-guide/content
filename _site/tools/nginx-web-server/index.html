<aside>
<p>üìö –í —ç—Ç–æ–π —Å—Ç–∞—Ç—å–µ –º—ã –≥–æ–≤–æ—Ä–∏–º –ø—Ä–æ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä Nginx. –ï—Å–ª–∏ –≤–∞–º –Ω–µ –æ—á–µ–Ω—å –ø–æ–Ω—è—Ç–Ω–æ, –∑–∞—á–µ–º –æ–Ω –Ω—É–∂–µ–Ω –∏ –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø—Ä–æ—á–∏—Ç–∞–π—Ç–µ —Å—Ç–∞—Ç—å—é ¬´<a href="/tools/web-server/">–í–µ–±-—Å–µ—Ä–≤–µ—Ä</a>¬ª.</p>
</aside>
<h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx</h2>
<p>–í–µ–±-—Å–µ—Ä–≤–µ—Ä Nginx –±—ã–ª —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –≤ 2004 –≥–æ–¥—É –ò–≥–æ—Ä–µ–º –°—ã—Å–æ–µ–≤—ã–º –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º –∏ –æ–∫–∞–∑–∞–ª—Å—è –æ—á–µ–Ω—å –±—ã—Å—Ç—Ä—ã–º. –ë–ª–∞–≥–æ–¥–∞—Ä—è –º–æ–¥—É–ª—å–Ω–æ—Å—Ç–∏, Nginx –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –æ–±—Ä–∞—Å—Ç–∞–ª —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é, –∏ —Å–µ–π—á–∞—Å –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –¥–ª—è –ª—é–±–æ–π –∑–∞–¥–∞—á–∏ –±—ç–∫–µ–Ω–¥–∞.</p>
<p>–í—ã –º–æ–∂–µ—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Nginx —Å –ø–æ–º–æ—â—å—é <a href="https://nginx.org/ru/docs/install.html">–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏</a>.</p>
<h3>–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏</h3>
<p>–° –ø–æ–º–æ—â—å—é –¥–∏—Ä–µ–∫—Ç–∏–≤ –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è –º–æ–¥—É–ª–∏. –î–∏—Ä–µ–∫—Ç–∏–≤—ã –¥–µ–ª—è—Ç—Å—è –Ω–∞ –ø—Ä–æ—Å—Ç—ã–µ –∏ –±–ª–æ—á–Ω—ã–µ. –ù–∞–ø—Ä–∏–º–µ—Ä, —Å –ø–æ–º–æ—â—å—é –ø—Ä–æ—Å—Ç–æ–π –¥–∏—Ä–µ–∫—Ç–∏–≤—ã <code>listen 8080;</code> –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –ø–æ–Ω–∏–º–∞–µ—Ç, —á—Ç–æ –Ω–∞–¥–æ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞—Ç—å –ø–æ—Ä—Ç <code>8080</code>, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π –±—É–¥—É—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –∑–∞–ø—Ä–æ—Å—ã –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤. –ü—Ä–∏–º–µ—Ä —Å–ª–æ–∂–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–∏–≤—ã:</p>
<pre><code class="language-nginxconf">server {
  listen 8080;
  root /data/up1;

  location / {
  }
}
</code></pre>
<p>–î–∏—Ä–µ–∫—Ç–∏–≤–∞ <code>server</code> –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ Nginx. –°–æ–≥–ª–∞—Å–Ω–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –¥–æ–ª–∂–µ–Ω —Å–ª—É—à–∞—Ç—å –ø–æ—Ä—Ç 8080 –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ, –Ω–æ–º–µ—Ä –∫–æ—Ç–æ—Ä–æ–≥–æ –∑–∞–¥–∞—ë—Ç—Å—è –¥–∏—Ä–µ–∫—Ç–∏–≤–æ–π <code>listen</code>, –∏ –æ—Ç–¥–∞–≤–∞—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ <code>/data/up1</code> –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ –∫–æ—Ä–Ω–µ–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Å–∞–π—Ç–∞ (–∑–∞ —ç—Ç–æ –æ—Ç–≤–µ—á–∞–µ—Ç –¥–∏—Ä–µ–∫—Ç–∏–≤–∞ <code>root</code>). –í–Ω—É—Ç—Ä–∏ —Ñ–∏–≥—É—Ä–Ω—ã—Ö —Å–∫–æ–±–æ–∫ –¥–∏—Ä–µ–∫—Ç–∏–≤—ã —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –∑–∞–≤–∏—Å–∏–º—ã–º–∏ –æ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞. –ö–æ–Ω—Ç–µ–∫—Å—Ç <code>location /</code> –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –¥–∏—Ä–µ–∫—Ç–∏–≤—ã –≤–Ω—É—Ç—Ä–∏ —Ñ–∏–≥—É—Ä–Ω—ã—Ö —Å–∫–æ–±–æ–∫ –æ–ø–∏—Å—ã–≤–∞—é—Ç –¥–µ–π—Å—Ç–≤–∏—è —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å–∞–π—Ç–∞. –î–æ—Å—Ç—É–ø–Ω—ã –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤: <a href="https://nginx.org/ru/docs/ngx_core_module.html#events">events</a>, <a href="https://nginx.org/ru/docs/http/ngx_http_core_module.html#http">http</a>, <a href="https://nginx.org/ru/docs/http/ngx_http_core_module.html#server">server</a> –∏ <a href="https://nginx.org/ru/docs/http/ngx_http_core_module.html#location">location</a>.</p>
<p>–ß—Ç–æ–±—ã –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç—å —á–∞—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ URI <code>/</code> (–ø–æ–¥—Ä–æ–±–Ω–µ–µ –æ–± —ç—Ç–æ–º –≤ —Å—Ç–∞—Ç—å–µ ¬´<a href="/tools/network/">–†–∞–±–æ—Ç–∞ —Å —Å–µ—Ç—å—é</a>¬ª) –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –∏–ª–∏ —Å–ª—É–∂–±–µ, –∑–∞–ø—É—â–µ–Ω–Ω–æ–π –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ –∏ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞—é—â–µ–π –ø–æ—Ä—Ç 8080, –∞ —á–∞—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ –ø—É—Ç–∏ <code>/images/</code> –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é <code>/data</code>, –Ω—É–∂–Ω–æ –æ–ø–∏—Å–∞—Ç—å —ç—Ç–æ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:</p>
<pre><code class="language-nginxconf">server {
  location / {
    proxy_pass http://localhost:8080;
  }

  location /images/ {
    root /data;
  }
}
</code></pre>
<p>–ú–æ–∂–Ω–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ —Ç–∏–ø—É —Ñ–∞–π–ª–æ–≤, –∏—Å–ø–æ–ª—å–∑—É—è —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è:</p>
<pre><code class="language-nginxconf">location ~ \.(gif|jpg|png)$ {
  root /data/images;
}
</code></pre>
<p>–ï—Å–ª–∏ –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã —á–∞—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–ª–æ—Å—å –∫ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, PHP), –Ω—É–∂–Ω–æ –æ–ø–∏—Å–∞—Ç—å —ç—Ç–æ —Ç–∞–∫:</p>
<pre><code class="language-nginxconf">server {
  location / {
    fastcgi_pass  localhost:9000;
    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    fastcgi_param QUERY_STRING    $query_string;
  }

  location ~ \.(gif|jpg|png)$ {
    root /data/images;
  }
}
</code></pre>
<p>–í —Å–ª–æ–∂–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–∏–≤–µ <code>location /</code> –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –ø–æ–≤–µ–¥–µ–Ω–∏–µ Nginx –¥–ª—è –≤—Å–µ—Ö –æ–±—Ä–∞—â–µ–Ω–∏–π –∫ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å–∞–π—Ç–∞. –í–µ–±-—Å–µ—Ä–≤–µ—Ä –æ–∂–∏–¥–∞–µ—Ç, —á—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –º–æ–¥—É–ª—å <code>ngx_http_fastcgi_module</code> –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–µ—Ç –ø–æ—Ä—Ç 9000 –Ω–∞ —ç—Ç–æ–º –∂–µ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ.</p>
<p>–ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –∏–º–µ–µ—Ç –Ω–∞–±–æ—Ä –ø—Ä–æ—Å—Ç—ã—Ö –¥–∏—Ä–µ–∫—Ç–∏–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Nginx. <code>fastcgi_pass</code>, <code>fastcgi_param</code> –≤—Ö–æ–¥—è—Ç –≤ —Å–ø–∏—Å–æ–∫ —Ç–∞–∫–∏—Ö –¥–∏—Ä–µ–∫—Ç–∏–≤ –¥–ª—è –º–æ–¥—É–ª—è <code>ngx_http_fastcgi_module</code>. –í –ø—Ä–∏–º–µ—Ä–µ —ç—Ç–æ—Ç –º–æ–¥—É–ª—å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç HTTP-–∑–∞–ø—Ä–æ—Å—ã –∫–ª–∏–µ–Ω—Ç–∞, –ø–µ—Ä–µ—Å–ª–∞–Ω–Ω—ã–µ Nginx, –∏—Å–ø–æ–ª–Ω—è–µ—Ç PHP-—Å–∫—Ä–∏–ø—Ç —Å –∏–º–µ–Ω–µ–º <code>fastcgi_script_name</code> –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ <code>document_root</code> –∏ GET-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã <code>query_string</code> –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —ç—Ç–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤. –ú–æ–¥—É–ª—å –ø–µ—Ä–µ–¥–∞—ë—Ç HTTP-–æ—Ç–≤–µ—Ç –≤–µ–±-—Å–µ—Ä–≤–µ—Ä—É Nginx, –∫–æ—Ç–æ—Ä—ã–π –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å –ø–æ—Å—ã–ª–∞–µ—Ç –∏—Ö –∫–ª–∏–µ–Ω—Ç—É.</p>
<aside>
<p>üìö –û –ø–æ—Ä—Ç–∞—Ö –∏ GET-–∑–∞–ø—Ä–æ—Å–∞—Ö —á–∏—Ç–∞–π—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–µ–µ –≤ —Å—Ç–∞—Ç—å–µ ¬´<a href="/tools/network/">–†–∞–±–æ—Ç–∞ —Å —Å–µ—Ç—å—é</a>¬ª.</p>
</aside>
<p>–í—Ç–æ—Ä–∞—è —Å–ª–æ–∂–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–∏–≤–∞ <code>location ~ \.(gif|jpg|png)$</code> –æ—Ç–¥–∞—ë—Ç –∫–ª–∏–µ–Ω—Ç—É —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –∫–∞—Ä—Ç–∏–Ω–æ–∫ –Ω–∞–ø—Ä—è–º—É—é, –º–∏–Ω—É—è –º–æ–¥—É–ª—å <code>ngx_http_fastcgi_module</code>. –°–∏–º–≤–æ–ª <code>~</code> –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –∑–∞ –Ω–∏–º —Å–ª–µ–¥—É–µ—Ç —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ. –í –ø—Ä–∏–º–µ—Ä–µ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∑–∞–ø—Ä–æ—à–µ–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç–æ–º —Ñ–∞–π–ª—ã –ø–æ –º–∞—Å–∫–µ. –ï—Å–ª–∏ —Ñ–∞–π–ª—ã —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è—é—Ç —É—Å–ª–æ–≤–∏—é, —Ç–æ –æ–Ω–∏ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —Å–æ–≥–ª–∞—Å–Ω–æ –∑–∞–ø—Ä–æ—à–µ–Ω–Ω–æ–º—É –ø—É—Ç–∏ –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞ <code>/data/images</code> –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.</p>
<h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π</h3>
<p>–ó–∞–ø—É—Å—Ç–∏—Ç—å Nginx –º–æ–∂–Ω–æ –Ω–∞–ø—Ä—è–º—É—é, –∏—Å–ø–æ–ª—å–∑—É—è –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª, –∏–ª–∏ –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Å–ª—É–∂–±—ã –≤ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ.</p>
<p>–ú–æ–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å –ø–æ–º–æ—â—å—é –∫–ª—é—á–∞ <code>-t</code>:</p>
<pre><code class="language-bash">nginx -t
</code></pre>
<p>–ï—Å–ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª –Ω–∞–ø–∏—Å–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ, —Ç–æ Nginx —Å–æ–æ–±—â–∏—Ç –æ–± —ç—Ç–æ–º –≤ –∫–æ–Ω—Å–æ–ª—å, —Ä–∞–≤–Ω–æ –∫–∞–∫ –∏ —É–∫–∞–∂–µ—Ç –Ω–∞ –æ—à–∏–±–∫–∏ –ø—Ä–∏ –∏—Ö –Ω–∞–ª–∏—á–∏–∏.</p>
<p>–í–µ–±-—Å–µ—Ä–≤–µ—Ä–æ–º Nginx –º–æ–∂–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å, –≤—ã–∑—ã–≤–∞—è –∑–∞–ø—É—â–µ–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º <code>-s</code>. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å:</p>
<pre><code class="language-bash">nginx -s &lt;signal&gt;
</code></pre>
<p>–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∏–≥–Ω–∞–ª—ã –∏–∑ —Å–ø–∏—Å–∫–∞:</p>
<p><code>stop</code> ‚Äî –±—ã—Å—Ç—Ä–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å;
<code>quit</code> ‚Äî –ø–ª–∞–≤–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å;
<code>reload</code> ‚Äî –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª;
<code>reopen</code> ‚Äî –æ—Ç–∫—Ä—ã—Ç—å –ª–æ–≥-—Ñ–∞–π–ª—ã –∑–∞–Ω–æ–≤–æ.</p>
<p>–ú–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª —Å –ø–æ–º–æ—â—å—é —Å–µ—Ä–≤–∏—Å–∞ <a href="https://ssl-config.mozilla.org">Mozilla SSL Configuration Generator</a>. –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–æ–∑–≤–æ–ª–∏—Ç —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –¥–µ—Ç–∞–ª—å–Ω–µ–µ.</p>
