<p>Когда устанавливаете зависимости при помощи пакетного менеджера в автоматизированном CI/CD окружении, обязательно пользуйтесь опцией фиксации лок-файла. Вот как это выглядит для разных пакетных менеджеров:</p>
<pre><code class="language-bash"># npm
npm install # ❌
npm ci # ✅

# pnpm
pnpm install # ❌
pnpm install --frozen-lockfile # ✅

# yarn classic
yarn install # ❌
yarn install --frozen-lockfile # ✅

# yarn modern
yarn install # ❌
yarn install --immutable # ✅
</code></pre>
<p>Без этих команд есть вероятность установить зависимости других версий, чем указанных в лок-файле. Это может создать неочевидные баги, связанные с версиями библиотек.</p>
<p>Например, если лок-файл не содержит зависимость, указанную в <strong>package.json</strong>. Стандартная установка обновит лок-файл, а установка в режиме CI упадёт с ошибкой.</p>
<p>Стоит отметить, что пакетные менеджеры pnpm и Yarn modern включают такой режим по умолчанию, если установка происходит в CI/CD окружении.</p>
<p>Подробнее про работу с пакетным менеджером и механизм лок-файла можно прочитать в статье <a href="/tools/package-managers/">«Пакетные менеджеры»</a>.</p>
