<h2>Просмотр HTTP-сообщений из командной строки</h2>
<p>В мире Unix-подобных операционных систем есть многофункциональная утилита <em>curl</em>, которая позволяет работать с протоколом HTTP. С одной стороны, с её помощью можно скачивать файлы, отправлять данные пользователей на сервер аналогично тому, как это делается через формы на сайтах, работать с API и даже отправлять письмо. С другой, это отличный способ познакомиться с работой протокола или протестировать веб-приложение, которое работает на стороне сервера.</p>
<p>Чтобы скачать главную страницу какого-то сайта (например, <em>http://example.com</em>), можно воспользоваться командой:</p>
<pre><code class="language-bash">curl http://example.com
</code></pre>
<p>В терминале вы увидите HTML-код страницы — это тело сообщения ответа. Существует возможность посмотреть и полные сообщения запроса и ответа, добавив ключ <code>-v</code>:</p>
<pre><code class="language-bash">curl -v http://example.com
*   Trying 93.184.216.34...
* TCP_NODELAY set
* Connected to example.com (93.184.216.34) port 80 (#0)
&gt; GET / HTTP/1.1
&gt; Host: example.com
&gt; User-Agent: curl/7.64.1
&gt; Accept: */*
&gt;
&lt; HTTP/1.1 200 OK
&lt; Age: 258083
&lt; Cache-Control: max-age=604800
&lt; Content-Type: text/html; charset=UTF-8
&lt; Date: Thu, 22 Jul 2021 15:42:57 GMT
&lt; Etag: &quot;3147526947+ident&quot;
&lt; Expires: Thu, 29 Jul 2021 15:42:57 GMT
&lt; Last-Modified: Thu, 17 Oct 2019 07:18:26 GMT
&lt; Server: ECS (dcb/7F17)
&lt; Vary: Accept-Encoding
&lt; X-Cache: HIT
&lt; Content-Length: 1256
&lt;
&lt;!doctype html&gt;
&lt;html&gt;

* Connection #0 to host example.com left intact
* Closing connection 0
</code></pre>
<p>В выводе команды curl символы <code>*</code>, <code>&gt;</code> и <code>&lt;</code> являются маркерами типа информации, отображённой в выводе команды. <code>*</code> используется для сервисной информации о соединении, <code>&gt;</code> — для обозначения запросов клиента (клиентом является curl), <code>&lt;</code> — для обозначения ответов сервера.</p>
<p>В первой части вывода содержится информация о процессе установления соединения через протокол TCP:</p>
<pre><code class="language-bash">*   Trying 93.184.216.34...
* TCP_NODELAY set
* Connected to example.com (93.184.216.34) port 80 (#0)
</code></pre>
<p>Curl пытается соединиться с сетевым устройством с IP-адресом <em>93.184.216.34</em>, поскольку именно этот адрес соответствует домену <em>example.com</em>. Строка после слова <code>Connected...</code> curl указывает, что соединение установлено. В последней части curl выводит информацию о прекращении соединения:</p>
<pre><code class="language-bash">* Connection #0 to host example.com left intact
* Closing connection 0
</code></pre>
<p>Вторая часть вывода — полное HTML-сообщение запроса со стартовой строкой и заголовками (тело сообщения отсутствует):</p>
<ul>
<li><code>&gt; GET / HTTP/1.1</code> — Стартовая строка с методом запроса, адресом внутри сайта и версией протокола.</li>
<li><code>&gt; Host: example.com</code> — Заголовок с указанием хоста, на котором работает веб-сервер.</li>
<li><code>&gt; User-Agent: curl/7.64.1</code> — Заголовок с информацией о клиенте, программе, запущенной у пользователя.</li>
<li><code>&gt; Accept: */*</code> — Заголовок с типами контента, которые клиент может корректно обработать.</li>
<li><code>&gt; </code> — После этой пустой строки могло быть тело запроса, но его редко используют в случае обработки данных методом GET.</li>
</ul>
<p>Третья часть вывода — полное HTML-сообщение ответа веб-сервера со стартовой строкой, заголовками и телом, в котором передаётся HTML-код страницы:</p>
<p><code>&lt; HTTP/1.1 200 OK</code> — Стартовая строка с версией протокола, кодом и статусом ответа сервера.
<code>&lt; Age: 258083</code> — Заголовок с временем жизни контента в кэше (в секундах).
<code>&lt; Cache-Control: max-age=604800</code> — Заголовок для определения времени (в секундах) и типа кэширования на сервере.
<code>&lt; Content-Type: text/html; charset=UTF-8</code> — Заголовок с типом контента и кодировкой.
<code>&lt; Date: Thu, 22 Jul 2021 15:42:57 GMT</code> — Заголовок с датой и временем отправки сообщения.
<code>&lt; Etag: &quot;3147526947+ident&quot;</code> — Заголовок с версией контента.
<code>&lt; Expires: Thu, 29 Jul 2021 15:42:57 GMT</code> — Заголовок с датой и временем, после которых контент считается устаревшим.
<code>&lt; Last-Modified: Thu, 17 Oct 2019 07:18:26 GMT</code> — Заголовок с датой  и временем последнего изменения контента.
<code>&lt; Server: ECS (dcb/7F17)</code> — Заголовок с именем веб-сервера. В нашем случае Elastic Cloud Server.
<code>&lt; Vary: Accept-Encoding</code> — Заголовок, который отвечает за выбор стратегии кэширования и сжатия.
<code>&lt; X-Cache: HIT</code> — Заголовок означает, что контент расположен на CDN (Content Delivery Network), а не на одном сервере.
<code>&lt; Content-Length: 1256</code> — Заголовок с информацией о длине контента в символах.
<code>&lt; </code> — После этой пустой строки идёт тело ответа сервера, в нашем случае HTML-код страницы</p>
<p>Вы можете узнать больше о домене с помощью разных сервисов, например, с помощью <a href="https://domain.glass/example.com">domain.glass</a>.</p>
