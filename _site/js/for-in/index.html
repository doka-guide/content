<h2>Кратко</h2>
<p><code>for...in</code> позволяет пройти в <a href="/js/loop/">цикле</a> по перечисляемым свойствам объекта, в том числе по свойствам из прототипа.</p>
<p>Перечисляемые свойства – это свойства, которые разработчик добавляет объекту. Встроенные свойства, например <code>length</code> у массива, не обходятся в цикле <code>for...in</code>.</p>
<h2>Как пишется</h2>
<p>Схематично структура для создания цикла выглядит так:</p>
<pre><code class="language-js">for (переменная in объект) {
  // действия внутри цикла
}
</code></pre>
<p>Для цикла необходимо объявить название переменной и указать сам объект, свойства которого нужно обойти. В объявленной переменной будет храниться имя свойства во время итерации:</p>
<pre><code class="language-js">const cat = {
  name: 'Борис',
  color: 'red',
  age: 8
}

for (const key in cat) {
  console.log(`${key} – ${cat[key]}`)
}
// name – 'Борис',
// color – 'red',
// age – 8
</code></pre>
<h2>Как это понять</h2>
<p>Цикл <code>for...in</code> — это хороший способ пройти по всем свойствам объекта, но стоит помнить несколько важных особенностей.</p>
<h3>Что такое перечисляемые свойства</h3>
<p>Перечисляемые свойства объекта – это свойства, которые явно помечены такими. Сказать свойству, что оно перечисляемое, можно через специальный метод <code>defineProperty</code>. Но для простоты все свойства, которые добавляются к объекту, являются перечисляемыми по умолчанию. <em>Встроенные свойства не перечисляется</em>. Например метод <a href="/js/index-of/"><code>indexOf</code></a> у объекта <code>String</code> или метод <a href="/js/object-tostring/"><code>toString</code></a> у <a href="/js/objects-objects-everywhere/">любого объекта</a> не участвуют в цикле <code>for...in</code>.</p>
<p>В цикле будут перечислены не только собственные свойства объекта, но и все перечисляемые свойства из прототипа объекта и прототипа прототипа и так далее:</p>
<pre><code class="language-js">const a = { a: 1 }
const b = { b: 2 }
const c = { c: 3 }

Object.setPrototypeOf(b, a)
Object.setPrototypeOf(c, b)

for (const key in c) {
  console.log(key)
}
// Выведет: c, b, a
</code></pre>
<h3>Порядок перечисления</h3>
<p>В стандарте языка нет описания того, как свойства должны перечисляться, потому порядок будет зависеть от реализации в конкретном движке браузера. Но есть базовые правила, которое можно встретить во всех браузерах:</p>
<p>1️⃣ Строковые имена свойств будут перечисляться в порядке их присвоения к объекту:</p>
<pre><code class="language-js">const developer = {
  name: 'Ваня',
  language: 'JavaScript',
  company: 'Google'
}

for (const key in developer) {
  console.log(key)
}
// name
// language
// company
</code></pre>
<p>2️⃣ Числовые свойства будут перечисляться в отсортированном порядке по возрастанию:</p>
<pre><code class="language-js">const booksById = {
  341: {
    name: 'Harry Potter'
  },
  144: {
    name: 'Flowers for Algernon'
  },
  202: {
    name: 'Lord of the Rings'
  }
}

for (const key in booksById) {
  console.log(key)
}
// 144
// 202
// 341
</code></pre>
<aside>
<p>❗️ Несмотря на договорённости о порядке вывода числовых ключей, не нужно использовать <code>for...in</code> для перебора массива. В будущем правила могут измениться. Для перебора у массива есть собственные методы: <a href="/js/array-foreach/"><code>forEach</code></a>, <a href="/js/array-map/"><code>map</code></a> и другие. В этих методах порядок перебора гарантирован.</p>
</aside>
<h3>Изменение объекта во время перебора</h3>
<p>Если во время выполнения <code>for...in</code> добавлять свойства в объект, то нет гарантии, что это свойство попадёт в цикл. Свойство, удалённое из объекта до того, как до него дошёл цикл, не будет участвовать в итерации.</p>
