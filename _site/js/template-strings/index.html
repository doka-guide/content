<h2>Кратко</h2>
<p>Шаблонные строки — это ещё один способ создания строк, наравне с одинарными или двойными кавычками. Шаблонные строки объявляются с помощью обратных кавычек.</p>
<p>Шаблонная строка может быть многострочной, все переносы строк в ней будут сохранены. В шаблонной строке с помощью синтаксиса <code>${ }</code> можно использовать любые <a href="/js/expressions-vs-statements/">выражения</a> JavaScript. Любой нестроковый результат (например, объект) будет приведён к строке.</p>
<p>Шаблонные строки сейчас — основной способ работы со строками, в которые нужно подставлять вычисляемые значения.</p>
<h2>Пример</h2>
<pre><code class="language-js">`однострочная строка`

`строка на
несколько строчек,
можно сколько угодно`;

`Дважды два равно ${2 * 2}`; // Дважды два равно 4

const name = &quot;Федя&quot;;

`Привет ${name}!`; // Привет Федя!
</code></pre>
<h2>Как это понять</h2>
<h3>Экранирование символов</h3>
<p>Шаблонные строки появились, чтобы помочь решить недостатки обычных строк. Например, когда мы используем обычные строки, то символы кавычек внутри приходится экранировать обратным слэшем <code>\</code>.</p>
<pre><code class="language-js">const doubleQuotes = &quot;\&quot;Я вам запрещаю!\&quot; – Джейсон Стэтхем.&quot;;
</code></pre>
<p>Можно просто использовать другие кавычки, но наличие обратных слэшей все равно влияет на читаемость. В шаблонной строке никакое экранирование не нужно (кроме, конечно, самого символа обратной кавычки).</p>
<pre><code class="language-js">const doubleQuotes = `&quot;Я вам запрещаю!&quot; – Джейсон Стэтхем.`;
</code></pre>
<p>Такой вариант читается гораздо лучше.</p>
<h3>Переносы строк</h3>
<p>Второй недостаток в обычных строках заключается в отсутствии удобной возможности сделать их многострочными. Чтобы сделать переносы в строку, нужно явно добавлять спецсимвол <code>\n</code>.</p>
<pre><code class="language-js">const str = &quot;Я первая строка\n&quot; + &quot;А я вторая строка\n&quot; + &quot;Ну и так далее&quot;;
</code></pre>
<p>Выглядит не очень удобно, даже если записать их на отдельных строках в редакторе. В шаблонных строках можно делать переносы строк, как в обычном тексте, и все они сохранятся.</p>
<pre><code class="language-js">const str = `Я первая строка.
А я вторая строка.

Ну а я третья, но надо мной и подо мной пустая строка и перенос.

Вообще так можно и стихотворение написать.
`;
</code></pre>
<p>В этой строке будут так же сохранены все пробелы и табуляции в начале строк. Это может быть удобно для написания html-разметки в строке.</p>
<h3>Динамические строки</h3>
<p>В обычных строках чтобы подставить значение в строку необходимо использовать конкатенацию через оператор <code>+</code>.</p>
<pre><code class="language-js">const host = &quot;google.com&quot;;
const query = &quot;template%20strings&quot;;

const url = &quot;https://&quot; + host + &quot;/?search=&quot; + query;
</code></pre>
<p>В итоге получается нужная нам строка, но для каждого такого динамического значения необходимо явно добавлять оператор <code>+</code> и дробить строку на части, если между динамическими частями есть статические.</p>
<p>Шаблонные строки предоставляют возможность использовать <a href="https://en.wikipedia.org/wiki/String_interpolation">строковую интерполяцию</a>, проще говоря, подставлять значения прямо в строку. Делается это с помощью конструкции из знака доллара и фигурных скобок <code>${ }</code>.</p>
<pre><code class="language-js">const host = &quot;google.com&quot;;
const query = &quot;template%20strings&quot;;

const url = `https://${host}/?search=${query}`;
</code></pre>
<p>Такая составная строка выглядит и читается как одна. Добавлять в неё новые динамические значения намного проще. Это самая главная особенность шаблонных строк. Из-за возможности удобной подстановки динамических значений шаблонные строки получили своё название.</p>
<h2>Как пишется</h2>
<p>Шаблонная строка записывается с помощью обратных кавычек. В отличие от обычных строк закрывающей обратной кавычке необязательно быть на той же строчке, что и открывающая, потому что шаблонные строки могут состоять из нескольких строк.</p>
<pre><code class="language-js">const singleLine = `Я открываюсь здесь, а закрываюсь ниже
`;
</code></pre>
<p>Чтобы использовать выражение внутри шаблонной строки, используйте специальную конструкцию: знак доллара вместе с фигурными скобками <code>${выражение}</code>. В фигурных скобках должно находится выражение, его результат и будет подставлен в итоговую строку.</p>
<pre><code class="language-js">const name = &quot;Миша&quot;;
const language = &quot;JavaScript&quot;;
const months = 2;

// Можно подставлять переменные
`Меня зовут ${name}. Я изучаю ${language} уже ${months} месяца.`;

// А можно выполнять целые выражения
`Я люблю фрукты: ${[&quot;яблоки&quot;, &quot;груши&quot;, &quot;апельсины&quot;].join(&quot;, &quot;)}`;
</code></pre>
<h3>Теговый шаблон</h3>
<p>Шаблонные строки дополнительно открыли функциональность для использования теговых шаблонов. Теговый шаблон – это функция, которая позволяет разбирать шаблонную строку. В такую функцию первым параметром придёт массив из кусочков строк, которые разделены выражениями, а остальные параметры будут значения выражений, которые подставляются в шаблонную строку. Но важным отличием от обычной функции это то, что вызов производится не с использованием круглых скобок, а с помощью слитного написания шаблонной строки.</p>
<pre><code class="language-js">// Просто обычная функция
function loggerTag(strings, ...expressionValues) {
  console.log(strings);
  console.log(...expressionValues);
}

loggerTag`Булевых значений всего ${2}: они бывают либо ${true} либо ${false}`;
// Первый лог выведет: [&quot;Булевых значений всего &quot;, &quot;: они бывают либо &quot;, &quot; либо &quot;, &quot;&quot;]
// Второй лог выведет: 2 true false
</code></pre>
<aside>
<p>☝️ Обратите внимание, что в массиве из строк в конце находится кусочек в виде пустой строки. Это нужно, чтобы количество элементов в массиве строк всегда было на один больше, чем количество подставляемых значений. Если бы в конце была бы ещё строка, то последним элементом была бы именно она.</p>
</aside>
<p>Теговая функция даёт контроль над шаблонной строкой и значениями, которые в неё подставляются. Таким образом можно создавать вспомогательные функции, например оборачивать параметры в html.</p>
<pre><code class="language-js">function emphasizer(strings, ...values) {
  const emphasized = values.map((value, i) =&gt; {
    // Склеиваем строку и измененное значение для неё
    return `${strings[i]}&lt;i&gt;${value}&lt;/i&gt;`;
  });

  // Не забываем добавить в конце последнюю строчку, т.к количество строк больше выражений
  return `${emphasized.join('')}${strings[strings.length - 1]};
}
</code></pre>
<p>Теговому шаблону правда необязательно возвращать именно строку, т.к это обычная функция, то вернуть можно что угодно, либо вообще ничего.</p>
