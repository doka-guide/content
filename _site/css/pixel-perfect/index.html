<h2>Кратко</h2>
<p>Pixel Perfect — это подход в вёрстке, когда итоговый результат максимально точно, пиксель в пиксель, совпадает с дизайнерским макетом. Для этого макет сайта сохраняется как обычная картинка, после чего эта картинка накладывается поверх свёрстанного сайта при помощи специальных инструментов, например, браузерных расширений. После наложения становится очевидной разница, если она есть, между тем, как нарисовал дизайнер, и тем, что получилось в итоге.</p>
<h2>Пример</h2>
<p>Допустим, дизайнеры подготовили нам такой макет:</p>
<p><img src="images/design.png" alt="Макет страницы «Курс обмена криптовалют» с рейтингом популярных площадок."></p>
<p>Мы его сверстали, получилось вот так:</p>
<iframe title="Результат вёрстки" src="demos/incorrect/" height="400"></iframe>
<p>Видите ли вы отличия с первого взгляда?</p>
<p>Есть несколько способов, как можно найти визуальные отличия.</p>
<p><strong>Сравнение скриншота и макета.</strong> Можно сделать скриншот сайта и загрузить в графический редактор, после чего сравнить скриншот и исходный макет в режиме наложения. Это удобно для дизайнеров, когда нужно быстро проверить совпадение, а под рукой как раз есть открытый графический редактор. Но весьма неудобно для разработчика, потому что после каждого минимального изменения придётся делать новый скриншот и заменять им старый.</p>
<p><strong>Добавление картинки макета на страницу.</strong> Можно сохранить макет картинкой, добавить её в документ с помощью тега <a href="/html/img/"><code>&lt;img&gt;</code></a> и <a href="/css/position/#fixed">разместить</a> в центре страницы. После чего можно изменить прозрачность картинки с помощью <a href="/css/opacity/"><code>opacity</code></a>, и отличия сразу будут видны. Это удобно при правке вёрстки, так как при изменении стилей сразу видно, насколько новая вёрстка совпадает с макетом. Этого можно добиться таким образом:</p>
<pre><code class="language-html">&lt;body&gt;
  &lt;!-- Контент страницы --&gt;
  &lt;img class=&quot;pixel-perfect-image&quot;
    src=&quot;pixel-perfect.png&quot; alt=&quot;&quot;&gt;
&lt;/body&gt;
</code></pre>
<pre><code class="language-css">.pixel-perfect-image {
  position: fixed;
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  opacity: 0.5;
}
</code></pre>
<p><strong>Браузерные расширения.</strong> У предыдущего способа есть важный недостаток — нужно на каждую страницу сначала добавить картинку, затем написать для неё стили, а в конце не забыть её удалить. Браузерные расширения, такие как <a href="https://www.welldonecode.com/perfectpixel/">PerfectPixel</a>, берут эту рутину на себя. PerfectPixel доступен для установки в Chrome, Opera, Edge, Firefox (там доступна только платная версия), и ведётся разработка версии для Safari.</p>
<h2>Расширения помогают найти неточности</h2>
<p><a href="demos/incorrect/">Откроем демо</a> из примера выше и сравним его с макетом. Вызвать интерфейс расширения можно, нажав на иконку расширения в списке расширений рядом с адресной строкой браузера. Откроется окно с таким интерфейсом:</p>
<p><img src="images/interface.png" alt="Интерфейс расширения PerfectPixel."></p>
<p>За что отвечает каждая кнопка, можно посмотреть на официальном сайте расширения. Чаще всего нужны следующие функции:</p>
<ol>
<li>Показать или скрыть накладываемый макет.</li>
<li>Инвертировать цвета макета.</li>
<li>Закрепить макет, чтобы он оставался на месте при прокрутке страницы.</li>
<li>Настроить положение макета относительно страницы.</li>
</ol>
<p>Наложим макет на вёрстку и инвертируем цвета. Получим такой результат:</p>
<p><img src="images/diff-1.png" alt="Вёрстка с наложенным поверх макетом, где они совпадают плохо."></p>
<p>Сразу видны отличия:</p>
<ul>
<li>Съехали заголовки на карточках и цена биткоина и эфира.</li>
<li>Съехало значение рейтинга надёжности.</li>
<li>Кнопка «Загрузить ещё» имеет другой размер.</li>
</ul>
<h3>Нужно ли учитывать все отличия?</h3>
<p>Если внимательно присмотреться, то <em>единственный</em> элемент, который расположен точно в нужном месте — это список карточек. Всё остальное хотя бы на 1 пиксель, но различается с макетом. Насколько это критично в рамках подхода Pixel Perfect?</p>
<p>Во-первых, небольшое смещение текста допустимо. Процесс рендеринга шрифта в графических редакторах и в браузерах отличается. Из-за этого заголовки карточек визуально отличаются, хотя и в макете, и в вёрстке у них одинаковые параметры.</p>
<p>Во-вторых, критичны только серьёзные расхождения. Основной целью Pixel Perfect подхода является, как бы это парадоксально ни звучало, не идеальная, а <em>приемлемая</em> точность. Не нужно добиваться полного совпадения, нужно добиться результата, при котором расхождения незаметны для пользователя. Сейчас у большинства людей стоят мониторы размером 1920 × 1080 пикселей. Если заголовок займёт, допустим, не 187, а 189 пикселей в ширину, большинство людей этого не заметит. Обращайте внимание на отступы между блоками, выравнивание, размеры иконок и так далее.</p>
<h2>Исправляем недостатки</h2>
<p>Исправим критичные расхождения. Для наглядности применим к заголовкам <a href="/css/letter-spacing/"><code>letter-spacing</code></a>. Это не критично, но для наглядности будет полезно.</p>
<p>Результат:</p>
<iframe title="Исправленная вёрстка" src="demos/correct/" height="400"></iframe>
<p>При сравнении с макетом видно, что вёрстка совпадает с ним практически идеально:</p>
<p><img src="images/diff-2.png" alt="Вёрстка с наложенным поверх макетом, где они почти совпадают."></p>
<h2>Работа с адаптивными макетами</h2>
<p>Современный сайт должен адаптироваться под разные разрешения экранов. Обычно это мобильные экраны, планшеты, ноутбуки и десктопы. В таком случае дизайнер делает по одному макету на каждое необходимое разрешение. Используйте инструменты разработчика, чтобы проверить вёрстку на разных разрешениях. Их можно открыть несколькими способами:</p>
<ul>
<li><kbd>Control Command I</kbd> — на macOS;</li>
<li><kbd>F12</kbd> — на Windows;</li>
<li><kbd>Control Shift I</kbd> — на Linux.</li>
</ul>
<p>Включаем панель инструментов устройства (device toolbar) и выбираем нужный размер экрана. Можно задать размер вручную или выбрать один из предустановленных шаблонов.</p>
<p><img src="images/adaptive.png" alt="Окно браузера с открытыми инструментами разработчика и панелью инструментов устройства."></p>
<p>После чего делаем всё так же, как раньше. Открываем расширение и добавляем картинку макета для соответствующего разрешения, после чего ищем отличия в вёрстке.</p>
<h2>Всегда ли нужен Pixel Perfect</h2>
<p>Требования к вёрстке зависят от задачи и от того, кто её поставил. Если заказчик требует вёрстки по Pixel Perfect — придётся соблюдать это требование. Если же заказчик не требует идеальной вёрстки (или он не знает, что такое бывает), то можно придерживаться следующего алгоритма.</p>
<h3>Когда использовать Pixel Perfect</h3>
<p>Если мы делаем презентационный вау-проект, то положение каждого элемента должно быть выверено до пикселя.</p>
<p>Если мы вносим изменения в сложную систему с кучей элементов, то поехавшую вёрстку можно даже не заметить, а вот при использовании Pixel Perfect изменения сразу бросятся в глаза.</p>
<p>Если все участники процесса понимают, для чего нужен Pixel Perfect и чего с его помощью мы пытаемся добиться, то впереди будет лишь продуктивная работа. Но иногда бывает, что у дизайнера дрогнула рука, и один элемент в списке случайно подвинулся на 1 пиксель. Затем макет прошёл цепочку согласований, и любая правка в нём — это недели бюрократических процессов. И тогда сплошь и рядом появляется ужасный код вида:</p>
<pre><code class="language-css">.list-item:nth-child(4) {
  margin-left: 1px;
}
</code></pre>
<p>Всё потому, что вёрстка по Pixel Perfect — один из критериев приёмки работы заказчиком. И гораздо быстрее встроить ряд таких «костылей», чем поправить макет и запустить ещё один раунд голосования. Таких ситуаций стоит по возможности избегать, потому что подобный код лишь делает сайт тяжелее и медленнее, необходимо выстраивать более гибкие бизнес-процессы.</p>
<h3>Когда идеальной вёрсткой можно пренебречь</h3>
<p>Если скорость разработки сильно важна. Например, мы делаем стартап, и если завтра не выйдем на рынок, то это сделают конкуренты. В таком случае <em>какая-нибудь</em> вёрстка, но сделанная быстро, гораздо лучше идеальной, на полировку которой ушли драгоценные часы.</p>
<p>Если точность вёрстки не важна вообще. Например, мы делаем прототип продукта, который потом будет ещё десять раз переделываться, или панель администрирования, которой будут пользоваться технические специалисты, а не пользователи. Безусловно, это не значит, что мы можем в таком случае верстать как угодно, но и идеала добиваться не стоит.</p>
<p>Если точная вёрстка в принципе недостижима. Например, у графических редакторов, таких как «Фотошоп», рендеринг шрифтов может отличаться от браузерного. И тогда мы не сможем <em>адекватно</em> добиться, чтобы текст в браузере выглядел в точности так, как в «Фотошопе» — придётся играть с <a href="/css/letter-spacing/"><code>letter-spacing</code></a>, разделять текст на лишние блоки и заниматься прочей уличной магией. Таких манипуляций стоит избегать.</p>
<h3>Взгляд со стороны заказчика</h3>
<p>Подход Pixel Perfect — самый простой способ для заказчика проверить качество вёрстки. Зачастую заказчик не обладает опытом веб-разработки и не сможет отличить плохой HTML- и CSS-код от хорошего. Но он сможет сравнить макет и результат, и если они совпадают — значит, верстальщик сделал свою работу хорошо.</p>
<p>Вам же, как верстальщику, это даёт конкурентное преимущество — говоря «Я верстаю по Pixel Perfect», вы сообщаете заказчику «Я сделаю именно то, что вам нужно, и вы сможете это очень легко проверить».</p>
<h3>Если вы новичок</h3>
<p>Когда вы только начинаете путь в веб-разработке и вёрстке, использование подхода Pixel Perfect крайне желательно. Это поможет вам развить очень важные качества:</p>
<ul>
<li>Глазомер. После получения определённого опыта вы сможете буквально с одного взгляда замечать неточности в вёрстке.</li>
<li>Чувство визуального ритма. Дизайнеры выбирают отступы между элементами, размеры шрифтов и иконок и т. д., основываясь на определённых критериях визуального ритма, которые помогают сделать сайт более приятным для глаза. Если вы будете постоянно следовать макетам дизайнеров, чувство визуального ритма разовьётся и у вас.</li>
<li>Внимательность и дотошность. Один из основных критериев хорошего программиста или верстальщика — способность внимательно и сфокусированно выполнять свою работу, не допуская неточностей.</li>
</ul>
<h2>Итог</h2>
<ol>
<li>Используйте подход Pixel Perfect, чтобы найти отличия получившейся вёрстки от исходного макета.</li>
<li>Не страдайте излишним перфекционизмом — обращайте внимание только на значимые отличия.</li>
<li>Обговорите требования к точности перед началом работы. При необходимости объясните коллегам, почему абсолютное совпадение макета и вёрстки не всегда достижимо, и что в этом нет ничего сильно страшного.</li>
</ol>
